{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/meaux/CascadeProjects/my%20second%20project/CascadeProjects/windsurf-project/nexflow-deploy/src/app/api/discovery/providers/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport fs from \"node:fs/promises\";\r\nimport path from \"node:path\";\r\nimport type { NexflowDiscoveredData, NexflowAction } from \"@/lib/nexflow-types\";\r\n\r\nexport type NexflowProvider = {\r\n  domain: string;\r\n  actionCount: number;\r\n  actions: NexflowAction[];\r\n};\r\n\r\nexport async function GET() {\r\n  try {\r\n    const filePath = path.join(process.cwd(), \"data\", \"nexflow-discovered.json\");\r\n    const fileContent = await fs.readFile(filePath, \"utf-8\");\r\n    const data: NexflowDiscoveredData = JSON.parse(fileContent);\r\n\r\n    // Group actions by domain\r\n    const providerMap = new Map<string, NexflowAction[]>();\r\n\r\n    for (const action of data.actions) {\r\n      const existing = providerMap.get(action.domain) || [];\r\n      existing.push(action);\r\n      providerMap.set(action.domain, existing);\r\n    }\r\n\r\n    const providers: NexflowProvider[] = Array.from(providerMap.entries()).map(\r\n      ([domain, actions]) => ({\r\n        domain,\r\n        actionCount: actions.length,\r\n        actions,\r\n      })\r\n    );\r\n\r\n    return NextResponse.json({\r\n      crawledAt: data.crawledAt,\r\n      providerCount: providers.length,\r\n      providers,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Failed to load providers:\", error);\r\n    return NextResponse.json(\r\n      { error: \"Failed to load providers\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AASO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,4HAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;QAClD,MAAM,cAAc,MAAM,gJAAE,CAAC,QAAQ,CAAC,UAAU;QAChD,MAAM,OAA8B,KAAK,KAAK,CAAC;QAE/C,0BAA0B;QAC1B,MAAM,cAAc,IAAI;QAExB,KAAK,MAAM,UAAU,KAAK,OAAO,CAAE;YACjC,MAAM,WAAW,YAAY,GAAG,CAAC,OAAO,MAAM,KAAK,EAAE;YACrD,SAAS,IAAI,CAAC;YACd,YAAY,GAAG,CAAC,OAAO,MAAM,EAAE;QACjC;QAEA,MAAM,YAA+B,MAAM,IAAI,CAAC,YAAY,OAAO,IAAI,GAAG,CACxE,CAAC,CAAC,QAAQ,QAAQ,GAAK,CAAC;gBACtB;gBACA,aAAa,QAAQ,MAAM;gBAC3B;YACF,CAAC;QAGH,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,WAAW,KAAK,SAAS;YACzB,eAAe,UAAU,MAAM;YAC/B;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}