module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},34,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),i=e.i(59756),n=e.i(61916),s=e.i(14444),o=e.i(37092),c=e.i(69741),p=e.i(16795),l=e.i(87718),d=e.i(95169),u=e.i(47587),m=e.i(66012),y=e.i(70101),g=e.i(26937),f=e.i(10372),h=e.i(93695);e.i(52474);var x=e.i(220),v=e.i(89171);let w={openapi:"3.0.3",info:{title:"NexFlow SMF Public API",description:`
Smart Meta-Facilitator (SMF) public API for x402 payment routing insights.

SMF aggregates data from multiple sources:
- **x402scan**: Observability metrics (success rate, latency, error rate)
- **Scattering/Dune**: Activity metrics (volume, transactions, unique users)
- **NexFlow internal**: Our own routing telemetry (dogfood, scout, external)

These endpoints are read-only and designed for:
- Dashboard and analytics integrations
- Agent clients making routing decisions
- Design tooling (Figma, etc.) that needs real data shapes
    `.trim(),version:"1.0.0",contact:{name:"NexFlow Team",url:"https://nexflowapp.app"}},servers:[{url:"https://api.nexflowapp.app",description:"Production API"},{url:"https://www.nexflowapp.app",description:"Production (www)"}],paths:{"/api/public/smf-overview":{get:{summary:"SMF Overview Statistics",description:"High-level statistics for the SMF system including total payments, success rate, volume, and average settlement time.",operationId:"getSmfOverview",tags:["SMF Public"],responses:{200:{description:"SMF overview statistics",content:{"application/json":{schema:{$ref:"#/components/schemas/SmfOverview"},example:{ok:!0,stats:{totalPayments:15420,successRate:.987,totalVolumeUsd:125e4,avgSettlementMs:2340,activeFacilitators:4,supportedNetworks:["eip155:8453","eip155:84532","solana:mainnet"]},timestamp:"2025-12-27T10:30:00.000Z"}}}}}}},"/api/public/smf-facilitators":{get:{summary:"Facilitator Leaderboard",description:"Ranked list of x402 facilitators with scores, metrics, and activity data from x402scan and Scattering.",operationId:"getSmfFacilitators",tags:["SMF Public"],parameters:[{name:"network",in:"query",description:"Filter by network (CAIP-2 format, e.g., eip155:8453)",schema:{type:"string"},example:"eip155:8453"},{name:"timeframe",in:"query",description:"Timeframe for metrics (1d, 7d, 30d)",schema:{type:"string",enum:["1d","7d","30d"],default:"1d"}}],responses:{200:{description:"Facilitator rankings with scores and metrics",content:{"application/json":{schema:{$ref:"#/components/schemas/FacilitatorLeaderboard"}}}}}}},"/api/public/smf-nexflow-metrics":{get:{summary:"NexFlow-Native Metrics",description:"Aggregated metrics from NexFlow's own traffic (dogfood, scout, external agents). Complements x402scan and Scattering data.",operationId:"getSmfNexflowMetrics",tags:["SMF Public"],parameters:[{name:"facilitatorId",in:"query",description:"Filter by facilitator ID",schema:{type:"string"}},{name:"network",in:"query",description:"Filter by network",schema:{type:"string"}},{name:"timeframe",in:"query",description:"Timeframe for aggregation (1h, 6h, 1d, 7d)",schema:{type:"string",enum:["1h","6h","1d","7d"],default:"1d"}}],responses:{200:{description:"NexFlow-native metrics by facilitator and network",content:{"application/json":{schema:{$ref:"#/components/schemas/NexflowMetrics"}}}}}}},"/api/smf/spec":{get:{summary:"SMF API Specification",description:"Returns this OpenAPI specification document describing all public SMF endpoints.",operationId:"getSmfSpec",tags:["SMF Meta"],responses:{200:{description:"OpenAPI 3.0 specification document",content:{"application/json":{schema:{type:"object",description:"OpenAPI 3.0 document"}}}}}}}},components:{schemas:{SmfOverview:{type:"object",properties:{ok:{type:"boolean"},stats:{type:"object",properties:{totalPayments:{type:"integer",description:"Total payments processed"},successRate:{type:"number",description:"Success rate (0-1)"},totalVolumeUsd:{type:"number",description:"Total volume in USD"},avgSettlementMs:{type:"number",description:"Average settlement time in ms"},activeFacilitators:{type:"integer",description:"Number of active facilitators"},supportedNetworks:{type:"array",items:{type:"string"},description:"List of supported networks (CAIP-2)"}}},timestamp:{type:"string",format:"date-time"}}},FacilitatorLeaderboard:{type:"object",properties:{ok:{type:"boolean"},network:{type:"string",nullable:!0},timeframe:{type:"string"},recommended:{type:"string",nullable:!0,description:"Recommended facilitator ID"},facilitators:{type:"array",items:{$ref:"#/components/schemas/FacilitatorEntry"}},timestamp:{type:"string",format:"date-time"}}},FacilitatorEntry:{type:"object",properties:{id:{type:"string",description:"Facilitator ID (e.g., cdp, payai)"},name:{type:"string",description:"Display name"},score:{type:"number",description:"Composite score (0-100)"},rank:{type:"integer",description:"Rank position"},selected:{type:"boolean",description:"Is this the recommended facilitator"},confidence:{type:"string",enum:["high","medium","low","none"],description:"Data confidence level"},x402scan:{type:"object",nullable:!0,properties:{successRate:{type:"number"},p95LatencyMs:{type:"number"},invocations:{type:"integer"},dataAgeHours:{type:"number"}}},scattering:{type:"object",nullable:!0,properties:{volumeUsd3d:{type:"number"},txCount3d:{type:"integer"},uniqueBuyers3d:{type:"integer"},activityScore:{type:"number",description:"0-1 normalized activity score"}}},reasons:{type:"array",items:{type:"string"},description:'Scoring reasons array (e.g., ["priority:1", "success-rate:100.0%"])'}}},NexflowMetrics:{type:"object",properties:{ok:{type:"boolean"},timeframe:{type:"string"},metrics:{type:"array",items:{$ref:"#/components/schemas/NexflowFacilitatorMetrics"}},timestamp:{type:"string",format:"date-time"}}},NexflowFacilitatorMetrics:{type:"object",properties:{facilitatorId:{type:"string"},network:{type:"string"},successRateNexflow:{type:"number",description:"Success rate from NexFlow traffic"},p95LatencyNexflow:{type:"number",description:"p95 latency from NexFlow traffic (ms)"},invocationsNexflow:{type:"integer",description:"Total NexFlow invocations"},byAgentType:{type:"object",properties:{dogfood:{type:"object",properties:{invocations:{type:"integer"},successRate:{type:"number"}}},scout:{type:"object",properties:{invocations:{type:"integer"},successRate:{type:"number"}}},external:{type:"object",properties:{invocations:{type:"integer"},successRate:{type:"number"}}}}}}}}},tags:[{name:"SMF Public",description:"Public endpoints for SMF data consumption"},{name:"SMF Meta",description:"Meta endpoints (spec, health, etc.)"}]};async function b(){return v.NextResponse.json(w,{status:200,headers:{"Content-Type":"application/json","Cache-Control":"public, max-age=3600, s-maxage=3600","X-SMF-Spec-Version":"1.0.0","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type"}})}async function R(){return new v.NextResponse(null,{status:204,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Content-Type","Access-Control-Max-Age":"86400"}})}e.s(["GET",()=>b,"OPTIONS",()=>R,"dynamic",0,"force-static","revalidate",0,3600],14586);var S=e.i(14586);let A=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/smf/spec/route",pathname:"/api/smf/spec",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/smf/spec/route.ts",nextConfigOutput:"standalone",userland:S}),{workAsyncStorage:C,workUnitAsyncStorage:F,serverHooks:N}=A;function M(){return(0,a.patchFetch)({workAsyncStorage:C,workUnitAsyncStorage:F})}async function E(e,t,a){A.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/smf/spec/route";v=v.replace(/\/index$/,"")||"/";let w=await A.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!w)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:b,params:R,nextConfig:S,parsedUrl:C,isDraftMode:F,prerenderManifest:N,routerServerContext:M,isOnDemandRevalidate:E,revalidateOnlyGenerated:P,resolvedPathname:T,clientReferenceManifest:k,serverActionsManifest:O}=w,I=(0,c.normalizeAppPath)(v),j=!!(N.dynamicRoutes[I]||N.routes[T]),q=async()=>((null==M?void 0:M.render404)?await M.render404(e,t,C,!1):t.end("This page could not be found"),null);if(j&&!F){let e=!!N.routes[T],t=N.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await q();throw new h.NoFallbackError}}let D=null;!j||A.isDev||F||(D="/index"===(D=T)?"/":D);let H=!0===A.isDev||!j,U=j&&!H;O&&k&&(0,s.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:k,serverActionsManifest:O,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:O})});let _=e.method||"GET",$=(0,n.getTracer)(),L=$.getActiveScopeSpan(),K={params:R,prerenderManifest:N,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>A.onRequestError(e,t,a,M)},sharedContext:{buildId:b}},B=new p.NodeNextRequest(e),G=new p.NodeNextResponse(t),V=l.NextRequestAdapter.fromNodeNextRequest(B,(0,l.signalFromNodeResponse)(t));try{let s=async e=>A.handle(V,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=$.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${_} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${_} ${v}`)}),o=!!(0,i.getRequestMeta)(e,"minimalMode"),c=async i=>{var n,c;let p=async({previousCacheEntry:r})=>{try{if(!o&&E&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await s(i);e.fetchMetrics=K.renderOpts.fetchMetrics;let c=K.renderOpts.pendingWaitUntil;c&&a.waitUntil&&(a.waitUntil(c),c=void 0);let p=K.renderOpts.collectedTags;if(!j)return await (0,m.sendResponse)(B,G,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,y.toNodeOutgoingHttpHeaders)(n.headers);p&&(t[f.NEXT_CACHE_TAGS_HEADER]=p),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=f.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=f.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:E})},M),t}},l=await A.handleResponse({req:e,nextConfig:S,cacheKey:D,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:N,isRoutePPREnabled:!1,isOnDemandRevalidate:E,revalidateOnlyGenerated:P,responseGenerator:p,waitUntil:a.waitUntil,isMinimalMode:o});if(!j)return null;if((null==l||null==(n=l.value)?void 0:n.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(c=l.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",E?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),F&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,y.fromNodeOutgoingHttpHeaders)(l.value.headers);return o&&j||d.delete(f.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,g.getCacheControlHeader)(l.cacheControl)),await (0,m.sendResponse)(B,G,new Response(l.value.body,{headers:d,status:l.value.status||200})),null};L?await c(L):await $.withPropagatedContext(e.headers,()=>$.trace(d.BaseServerSpan.handleRequest,{spanName:`${_} ${v}`,kind:n.SpanKind.SERVER,attributes:{"http.method":_,"http.target":e.url}},c))}catch(t){if(t instanceof h.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:U,isOnDemandRevalidate:E})}),j)throw t;return await (0,m.sendResponse)(B,G,new Response(null,{status:500})),null}}e.s(["handler",()=>E,"patchFetch",()=>M,"routeModule",()=>A,"serverHooks",()=>N,"workAsyncStorage",()=>C,"workUnitAsyncStorage",()=>F],34)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__064d6764._.js.map