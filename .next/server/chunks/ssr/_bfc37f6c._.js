module.exports=[33441,a=>{"use strict";let b=(0,a.i(70106).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},5151,a=>{"use strict";let b=(0,a.i(70106).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],5151)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},59637,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(35125),e=a.i(15618),f=a.i(92e3),g=a.i(5151),h=a.i(33441);function i(){let[a,d]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,k]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1);(0,c.useEffect)(()=>{q()},[]);let q=async()=>{try{h(!0);let a=localStorage.getItem("api_key");if(!a)throw Error("No API key");let b=await fetch("/api/v1/endpoints",{headers:{"x-api-key":a}}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to load");let e=await Promise.all((c.endpoints||[]).map(async b=>{try{let c=await fetch(`/api/v1/endpoints/${b.id}/summary`,{headers:{"x-api-key":a}}),d=await c.json();return{...b,pricePerCall:b.pricePerCall||b.price_per_call||"0.001",platformFeeBps:b.platformFeeBps||b.platform_fee_bps||200,thisMonth:d.thisMonth}}catch{return b}}));d(e)}catch(a){k(a.message)}finally{h(!1)}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Metered Endpoints"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Create endpoints with per-call pricing"})]}),(0,b.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4"}),"Create Endpoint"]})]}),i&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg flex items-center gap-3",children:[(0,b.jsx)(f.AlertCircle,{className:"w-5 h-5 text-red-400"}),(0,b.jsx)("span",{className:"text-red-400",children:i})]}),g?(0,b.jsx)(m,{}):0===a.length?(0,b.jsx)(l,{onCreateClick:()=>p(!0)}):(0,b.jsx)(j,{endpoints:a,onRefresh:q}),o&&(0,b.jsx)(n,{onClose:()=>p(!1),onCreated:()=>{p(!1),q()}})]})}function j({endpoints:a,onRefresh:c}){return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 px-4 text-sm text-gray-500 font-medium",children:[(0,b.jsx)("div",{className:"col-span-4",children:"Endpoint"}),(0,b.jsx)("div",{className:"col-span-2",children:"Price/Call"}),(0,b.jsx)("div",{className:"col-span-2",children:"Calls (Month)"}),(0,b.jsx)("div",{className:"col-span-2",children:"Revenue"}),(0,b.jsx)("div",{className:"col-span-2",children:"Status"})]}),a.map(a=>(0,b.jsx)(k,{endpoint:a},a.id))]})}function k({endpoint:a}){let[d,e]=(0,c.useState)(!1),f=(parseFloat(a.pricePerCall)*(a.platformFeeBps/1e4)).toFixed(6);return(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-4 p-4 bg-gray-900 rounded-lg border border-gray-800 items-center",children:[(0,b.jsxs)("div",{className:"col-span-4",children:[(0,b.jsx)("div",{className:"font-medium text-white",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-gray-500 truncate",children:a.upstreamUrl}),(0,b.jsxs)("button",{onClick:()=>{let b=`${window.location.origin}/api/v1/run/${a.id}`;navigator.clipboard.writeText(b),e(!0),setTimeout(()=>e(!1),2e3)},className:"mt-1 text-xs text-lime-400 hover:text-lime-300 flex items-center gap-1",children:[d?(0,b.jsx)(h.Check,{className:"w-3 h-3"}):(0,b.jsx)(g.Copy,{className:"w-3 h-3"}),d?"Copied!":"Copy metered URL"]})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsxs)("div",{className:"text-white font-mono",children:["$",a.pricePerCall]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Fee: $",f," (",a.platformFeeBps/100,"%)"]})]}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("div",{className:"text-white font-mono",children:a.thisMonth?.calls?.toLocaleString()||"0"})}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsxs)("div",{className:"text-lime-400 font-mono",children:["$",a.thisMonth?.creatorNet||"0.00"]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Gross: $",a.thisMonth?.gross||"0.00"]})]}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs rounded ${"active"===a.status?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:a.status})})]})}function l({onCreateClick:a}){return(0,b.jsxs)("div",{className:"text-center py-16 bg-gray-900 rounded-lg border border-gray-800",children:[(0,b.jsx)(d.Server,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No metered endpoints yet"}),(0,b.jsx)("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Create a metered endpoint to start charging per API call. Set your price, and we'll handle the billing."}),(0,b.jsx)("button",{onClick:a,className:"px-6 py-3 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300",children:"Create Your First Endpoint"})]})}function m(){return(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-lime-400"}),(0,b.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading endpoints..."})]})}function n({onClose:a,onCreated:d}){let[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)({name:"",upstreamUrl:"",pricePerCall:"0.001",platformFeeBps:200,recipientAddress:""}),k=async a=>{a.preventDefault(),f(!0),h(null);try{let a=localStorage.getItem("api_key");if(!a)throw Error("No API key");let b=await fetch("/api/v1/endpoints",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":a},body:JSON.stringify({name:i.name,upstreamUrl:i.upstreamUrl,price:"1000000",recipientAddress:i.recipientAddress,pricePerCall:i.pricePerCall,platformFeeBps:i.platformFeeBps})}),c=await b.json();if(!b.ok)throw Error(c.error||"Failed to create endpoint");d()}catch(a){h(a.message)}finally{f(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-xl border border-gray-800 p-6 max-w-lg w-full mx-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create Metered Endpoint"}),g&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-800 rounded-lg text-red-400 text-sm",children:g}),(0,b.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Endpoint Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:i.name,onChange:a=>j({...i,name:a.target.value}),placeholder:"My API Endpoint",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-lime-400 focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Upstream URL *"}),(0,b.jsx)("input",{type:"url",required:!0,value:i.upstreamUrl,onChange:a=>j({...i,upstreamUrl:a.target.value}),placeholder:"https://api.example.com/v1/endpoint",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-lime-400 focus:outline-none"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"The actual API endpoint that will be called"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price per Call (USDC) *"}),(0,b.jsx)("input",{type:"text",required:!0,value:i.pricePerCall,onChange:a=>j({...i,pricePerCall:a.target.value}),placeholder:"0.001",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-lime-400 focus:outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Platform Fee (%)"}),(0,b.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",value:i.platformFeeBps/100,onChange:a=>j({...i,platformFeeBps:100*parseFloat(a.target.value)}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-lime-400 focus:outline-none"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Your Wallet Address *"}),(0,b.jsx)("input",{type:"text",required:!0,value:i.recipientAddress,onChange:a=>j({...i,recipientAddress:a.target.value}),placeholder:"0x...",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white font-mono text-sm focus:border-lime-400 focus:outline-none"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Where you'll receive payments (minus platform fee)"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:e,className:"flex-1 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 disabled:opacity-50",children:e?"Creating...":"Create Endpoint"}),(0,b.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700",children:"Cancel"})]})]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=_bfc37f6c._.js.map