{"version":3,"sources":["../../../../src/app/x402-demo/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { Zap, Play, CheckCircle, XCircle, Loader2, Copy, Check, Terminal, TrendingUp, DollarSign, Webhook } from 'lucide-react'\r\nimport { analyticsApi, billingApi, webhooksApi } from '@/lib/api-client'\r\n\r\ninterface PaymentRequirements {\r\n  scheme: string\r\n  network: string\r\n  maxAmountRequired: string\r\n  asset: string\r\n  payTo: string\r\n  resource: string\r\n  description: string\r\n  mimeType: string\r\n  maxTimeoutSeconds: number\r\n  validAfter?: string\r\n  validBefore?: string\r\n}\r\n\r\ninterface DemoResult {\r\n  success: boolean\r\n  demo?: boolean\r\n  message?: string\r\n  paymentReference?: string\r\n  transactionHash?: string\r\n  amount?: string\r\n  asset?: string\r\n  network?: string\r\n  allowance?: {\r\n    callsUsed: number\r\n    callsLimit: number\r\n    amountUsed: string\r\n    amountLimit: string\r\n  }\r\n  code?: string\r\n  limits?: {\r\n    callsUsed: number\r\n    callsLimit: number\r\n    amountUsed: string\r\n    amountLimit: string\r\n  }\r\n}\r\n\r\nexport default function X402DemoPage() {\r\n  const [apiKey, setApiKey] = useState('')\r\n  const [loading, setLoading] = useState(false)\r\n  const [step, setStep] = useState<'input' | 'payment-required' | 'success' | 'error'>('input')\r\n  const [paymentRequirements, setPaymentRequirements] = useState<PaymentRequirements | null>(null)\r\n  const [result, setResult] = useState<DemoResult | null>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [copied, setCopied] = useState(false)\r\n  const [analytics, setAnalytics] = useState<any | null>(null)\r\n  const [usage, setUsage] = useState<any | null>(null)\r\n  const [webhooks, setWebhooks] = useState<any[]>([])\r\n  const [loadingAnalytics, setLoadingAnalytics] = useState(false)\r\n\r\n  const copyToClipboard = (text: string) => {\r\n    navigator.clipboard.writeText(text)\r\n    setCopied(true)\r\n    setTimeout(() => setCopied(false), 2000)\r\n  }\r\n\r\n  const loadPostDemoData = async () => {\r\n    if (!apiKey.trim()) return\r\n    \r\n    try {\r\n      setLoadingAnalytics(true)\r\n      \r\n      // The demo endpoint ID is 'x402_demo_resource'\r\n      const endpointId = 'x402_demo_resource'\r\n      \r\n      // Load analytics for demo endpoint\r\n      try {\r\n        const analyticsData = await analyticsApi.getEndpointAnalytics(endpointId, {\r\n          granularity: 'day',\r\n          includeDetails: true,\r\n        })\r\n        setAnalytics(analyticsData)\r\n      } catch (err) {\r\n        console.error('Failed to load analytics:', err)\r\n      }\r\n      \r\n      // Load usage data\r\n      try {\r\n        const usageData = await billingApi.getUsage({ periodType: 'monthly' })\r\n        setUsage(usageData)\r\n      } catch (err) {\r\n        console.error('Failed to load usage:', err)\r\n      }\r\n      \r\n      // Load webhooks\r\n      try {\r\n        const webhooksData = await webhooksApi.list()\r\n        setWebhooks(webhooksData.webhooks || [])\r\n      } catch (err) {\r\n        console.error('Failed to load webhooks:', err)\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to load post-demo data:', err)\r\n    } finally {\r\n      setLoadingAnalytics(false)\r\n    }\r\n  }\r\n\r\n  const runDemo = async () => {\r\n    if (!apiKey.trim()) {\r\n      setError('Please enter an API key')\r\n      return\r\n    }\r\n\r\n    setLoading(true)\r\n    setError(null)\r\n    setStep('input')\r\n\r\n    try {\r\n      // First call: Get 402 payment requirements\r\n      const firstResponse = await fetch('/api/v1/x402/demo/resource', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'x-api-key': apiKey.trim(),\r\n        },\r\n      })\r\n\r\n      const firstData = await firstResponse.json()\r\n\r\n      if (firstResponse.status === 402) {\r\n        // Got payment requirements\r\n        setPaymentRequirements(firstData.accepts?.[0] || null)\r\n        setStep('payment-required')\r\n        setError('Payment required. In a real flow, you would use a wallet to pay. For this demo, NexFlow sponsors the payment automatically.')\r\n        \r\n        // For demo purposes, we'll show the payment requirements\r\n        // In a real implementation, the client would:\r\n        // 1. Parse the payment requirements\r\n        // 2. Create a payment transaction\r\n        // 3. Send the x-payment header with the second request\r\n        \r\n        // For now, we'll just show what would happen\r\n        setTimeout(async () => {\r\n          // Simulate payment and retry (in real flow, this would be done by the wallet)\r\n          try {\r\n            const secondResponse = await fetch('/api/v1/x402/demo/resource', {\r\n              method: 'POST',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'x-api-key': apiKey.trim(),\r\n                // In a real flow, this would be the actual payment header from the wallet\r\n                // For demo, we'll let the backend handle it if it's in test mode\r\n                'x-payment': 'demo-payment-header', // Placeholder - backend will handle demo mode\r\n              },\r\n            })\r\n\r\n            const secondData = await secondResponse.json()\r\n\r\n            if (secondResponse.ok && secondData.success) {\r\n              setResult(secondData)\r\n              setStep('success')\r\n              // Load analytics and usage data\r\n              loadPostDemoData()\r\n            } else {\r\n              setError(secondData.message || secondData.error || 'Payment verification failed')\r\n              setResult(secondData)\r\n              setStep('error')\r\n            }\r\n          } catch (err: any) {\r\n            setError(err.message || 'Failed to verify payment')\r\n            setStep('error')\r\n          } finally {\r\n            setLoading(false)\r\n          }\r\n        }, 1000)\r\n      } else if (firstResponse.ok) {\r\n        // Already paid\r\n        setResult(firstData)\r\n        setStep('success')\r\n        setLoading(false)\r\n      } else {\r\n        // Error\r\n        setError(firstData.message || firstData.error || 'Request failed')\r\n        setResult(firstData)\r\n        setStep('error')\r\n        setLoading(false)\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || 'Failed to run demo')\r\n      setStep('error')\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const curlExample = `curl -X POST https://your-domain.com/api/v1/x402/demo/resource \\\\\r\n  -H \"x-api-key: ${apiKey || 'YOUR_API_KEY'}\" \\\\\r\n  -H \"Content-Type: application/json\"`\r\n\r\n  const tsExample = `import fetch from 'node-fetch'\r\n\r\nconst response = await fetch('https://your-domain.com/api/v1/x402/demo/resource', {\r\n  method: 'POST',\r\n  headers: {\r\n    'x-api-key': '${apiKey || 'YOUR_API_KEY'}',\r\n    'Content-Type': 'application/json',\r\n  },\r\n})\r\n\r\nif (response.status === 402) {\r\n  const paymentReq = await response.json()\r\n  // Handle payment requirements\r\n  // Then retry with x-payment header\r\n}`\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-950 text-white\">\r\n      {/* Navigation */}\r\n      <nav className=\"sticky top-0 z-50 border-b border-gray-800 bg-gray-950/80 backdrop-blur-xl\">\r\n        <div className=\"max-w-6xl mx-auto px-4\">\r\n          <div className=\"flex items-center justify-between h-16\">\r\n            <Link href=\"/\" className=\"flex items-center gap-2\">\r\n              <div className=\"w-8 h-8 rounded-lg bg-lime-400 flex items-center justify-center\">\r\n                <Zap className=\"w-5 h-5 text-gray-900\" />\r\n              </div>\r\n              <span className=\"text-lg font-bold text-white\">NexFlow</span>\r\n            </Link>\r\n            <div className=\"flex items-center gap-4\">\r\n              <Link href=\"/docs\" className=\"text-sm text-gray-400 hover:text-white transition-colors\">\r\n                API Docs\r\n              </Link>\r\n              <Link href=\"/dashboard\" className=\"text-sm text-cyan-400 hover:text-cyan-300 transition-colors\">\r\n                Dashboard\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      <main className=\"max-w-4xl mx-auto px-4 py-12\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-4xl font-bold mb-4\">x402 Demo</h1>\r\n          <p className=\"text-gray-400 text-lg\">\r\n            This is a real x402 demo using NexFlow's infra. We cover your first $1 of payments.\r\n          </p>\r\n        </div>\r\n\r\n        {/* API Key Input */}\r\n        <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-6 mb-6\">\r\n          <label className=\"block text-sm font-medium mb-2\">API Key</label>\r\n          <input\r\n            type=\"text\"\r\n            value={apiKey}\r\n            onChange={(e) => setApiKey(e.target.value)}\r\n            placeholder=\"nf_live_...\"\r\n            className=\"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 mt-2\">\r\n            Paste your API key here. Get one from{' '}\r\n            <Link href=\"/dashboard\" className=\"text-lime-400 hover:text-lime-300\">\r\n              your dashboard\r\n            </Link>\r\n            .\r\n          </p>\r\n        </div>\r\n\r\n        {/* Run Button */}\r\n        <button\r\n          onClick={runDemo}\r\n          disabled={loading || !apiKey.trim()}\r\n          className=\"w-full px-6 py-3 bg-lime-400 hover:bg-lime-300 text-gray-900 font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n              Running Demo...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Play className=\"w-5 h-5\" />\r\n              Run x402 Demo\r\n            </>\r\n          )}\r\n        </button>\r\n\r\n        {/* Payment Requirements (402) */}\r\n        {step === 'payment-required' && paymentRequirements && (\r\n          <div className=\"mt-6 bg-blue-900/20 border border-blue-800 rounded-lg p-6\">\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n              <XCircle className=\"w-5 h-5 text-blue-400\" />\r\n              <h3 className=\"text-lg font-semibold\">402 Payment Required</h3>\r\n            </div>\r\n            <div className=\"space-y-2 text-sm\">\r\n              <div><span className=\"text-gray-400\">Amount:</span> <span className=\"text-white\">{paymentRequirements.maxAmountRequired} (atomic units)</span></div>\r\n              <div><span className=\"text-gray-400\">Asset:</span> <span className=\"text-white\">{paymentRequirements.asset}</span></div>\r\n              <div><span className=\"text-gray-400\">Network:</span> <span className=\"text-white\">{paymentRequirements.network}</span></div>\r\n              <div><span className=\"text-gray-400\">Pay To:</span> <span className=\"text-white font-mono text-xs\">{paymentRequirements.payTo}</span></div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Success Result */}\r\n        {step === 'success' && result && (\r\n          <div className=\"space-y-6\">\r\n            <div className=\"bg-green-900/20 border border-green-800 rounded-lg p-6\">\r\n              <div className=\"flex items-center gap-2 mb-4\">\r\n                <CheckCircle className=\"w-5 h-5 text-green-400\" />\r\n                <h3 className=\"text-lg font-semibold\">Payment Verified!</h3>\r\n              </div>\r\n              <div className=\"space-y-2 text-sm\">\r\n                <div><span className=\"text-gray-400\">Message:</span> <span className=\"text-white\">{result.message}</span></div>\r\n                {result.transactionHash && (\r\n                  <div>\r\n                    <span className=\"text-gray-400\">Transaction Hash:</span>{' '}\r\n                    <span className=\"text-white font-mono text-xs\">{result.transactionHash}</span>\r\n                  </div>\r\n                )}\r\n                {result.allowance && (\r\n                  <div className=\"mt-4 pt-4 border-t border-gray-800\">\r\n                    <div className=\"text-gray-400 mb-2\">Allowance Usage:</div>\r\n                    <div className=\"space-y-1 text-xs\">\r\n                      <div>Calls: {result.allowance.callsUsed} / {result.allowance.callsLimit}</div>\r\n                      <div>Amount: {result.allowance.amountUsed} / {result.allowance.amountLimit} (atomic units)</div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Usage & Revenue Summary */}\r\n            {loadingAnalytics ? (\r\n              <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-6 text-center\">\r\n                <Loader2 className=\"w-6 h-6 animate-spin mx-auto text-lime-400\" />\r\n                <p className=\"mt-2 text-gray-400 text-sm\">Loading analytics...</p>\r\n              </div>\r\n            ) : (analytics || usage) && (\r\n              <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n                  <TrendingUp className=\"w-5 h-5 text-lime-400\" />\r\n                  Usage & Revenue Generated\r\n                </h3>\r\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n                  {analytics?.summary && (\r\n                    <>\r\n                      <div>\r\n                        <span className=\"text-xs text-gray-400\">Requests</span>\r\n                        <p className=\"text-xl font-bold\">{analytics.summary.totalRequests || 0}</p>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-xs text-gray-400\">Payments</span>\r\n                        <p className=\"text-xl font-bold\">{analytics.summary.totalPayments || 0}</p>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-xs text-gray-400\">Revenue</span>\r\n                        <p className=\"text-xl font-bold text-lime-400\">\r\n                          ${((parseFloat(analytics.summary.totalRevenue || '0')) / 1e6).toFixed(6)}\r\n                        </p>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"text-xs text-gray-400\">Success Rate</span>\r\n                        <p className=\"text-xl font-bold\">\r\n                          {((analytics.summary.successRate || 0) * 100).toFixed(1)}%\r\n                        </p>\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-4\">\r\n                  ðŸ’¡ This demo uses NexFlow's metered endpoint infrastructure. View detailed analytics in the{' '}\r\n                  <Link href=\"/dashboard/analytics\" className=\"text-lime-400 hover:text-lime-300\">\r\n                    Analytics dashboard\r\n                  </Link>\r\n                  .\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {/* Webhook Activity */}\r\n            {webhooks.length > 0 && (\r\n              <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\r\n                  <Webhook className=\"w-5 h-5 text-cyan-400\" />\r\n                  Webhook Activity\r\n                </h3>\r\n                <p className=\"text-sm text-gray-400 mb-3\">\r\n                  The following webhooks were triggered for this demo:\r\n                </p>\r\n                <div className=\"space-y-2\">\r\n                  {webhooks.map((webhook) => (\r\n                    <div key={webhook.id} className=\"bg-gray-800 rounded-lg p-3 flex items-center justify-between\">\r\n                      <div>\r\n                        <p className=\"text-sm font-medium\">{webhook.url}</p>\r\n                        <div className=\"flex flex-wrap gap-1 mt-1\">\r\n                          {webhook.events.map((event: string) => (\r\n                            <span\r\n                              key={event}\r\n                              className=\"px-2 py-0.5 text-xs rounded bg-gray-700 text-gray-300\"\r\n                            >\r\n                              {event}\r\n                            </span>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                      {webhook.enabled ? (\r\n                        <span className=\"px-2 py-1 text-xs rounded bg-green-900/30 text-green-400\">\r\n                          Active\r\n                        </span>\r\n                      ) : (\r\n                        <span className=\"px-2 py-1 text-xs rounded bg-gray-700 text-gray-400\">\r\n                          Disabled\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-4\">\r\n                  ðŸ’¡ Configure webhooks in the{' '}\r\n                  <Link href=\"/dashboard/webhooks\" className=\"text-cyan-400 hover:text-cyan-300\">\r\n                    Webhooks dashboard\r\n                  </Link>\r\n                  .\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Error Result */}\r\n        {step === 'error' && (\r\n          <div className=\"mt-6 bg-red-900/20 border border-red-800 rounded-lg p-6\">\r\n            <div className=\"flex items-center gap-2 mb-4\">\r\n              <XCircle className=\"w-5 h-5 text-red-400\" />\r\n              <h3 className=\"text-lg font-semibold\">Error</h3>\r\n            </div>\r\n            <div className=\"text-sm text-red-400\">\r\n              {error || result?.message || result?.code || 'Unknown error'}\r\n            </div>\r\n            {result?.limits && (\r\n              <div className=\"mt-4 pt-4 border-t border-gray-800\">\r\n                <div className=\"text-gray-400 mb-2\">Current Limits:</div>\r\n                <div className=\"space-y-1 text-xs\">\r\n                  <div>Calls: {result.limits.callsUsed} / {result.limits.callsLimit}</div>\r\n                  <div>Amount: {result.limits.amountUsed} / {result.limits.amountLimit} (atomic units)</div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Code Examples */}\r\n        <div className=\"mt-12 space-y-6\">\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h2 className=\"text-2xl font-bold\">Code Examples</h2>\r\n              <button\r\n                onClick={() => copyToClipboard(curlExample)}\r\n                className=\"text-sm text-gray-400 hover:text-white flex items-center gap-2\"\r\n              >\r\n                {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\r\n                Copy\r\n              </button>\r\n            </div>\r\n            <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-4\">\r\n              <div className=\"flex items-center gap-2 mb-2\">\r\n                <Terminal className=\"w-4 h-4 text-gray-400\" />\r\n                <span className=\"text-sm text-gray-400\">cURL</span>\r\n              </div>\r\n              <pre className=\"text-sm text-gray-300 overflow-x-auto\">\r\n                <code>{curlExample}</code>\r\n              </pre>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <h3 className=\"text-xl font-semibold\">TypeScript</h3>\r\n              <button\r\n                onClick={() => copyToClipboard(tsExample)}\r\n                className=\"text-sm text-gray-400 hover:text-white flex items-center gap-2\"\r\n              >\r\n                {copied ? <Check className=\"w-4 h-4\" /> : <Copy className=\"w-4 h-4\" />}\r\n                Copy\r\n              </button>\r\n            </div>\r\n            <div className=\"bg-gray-900 border border-gray-800 rounded-lg p-4\">\r\n              <pre className=\"text-sm text-gray-300 overflow-x-auto\">\r\n                <code>{tsExample}</code>\r\n              </pre>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}