module.exports=[5151,a=>{"use strict";let b=(0,a.i(70106).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>b],5151)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},91938,a=>{"use strict";class b extends Error{status;code;details;constructor(a,b,c,d){super(c),this.status=a,this.code=b,this.details=d,this.name="ApiError"}}async function c(a,d={}){throw new b(401,"UNAUTHORIZED","API key not found. Please set your API key in settings.")}a.s(["ApiError",()=>b,"analyticsApi",0,{getEndpointAnalytics:(a,b)=>{let d=new URLSearchParams;b?.startDate&&d.set("startDate",b.startDate),b?.endDate&&d.set("endDate",b.endDate),b?.granularity&&d.set("granularity",b.granularity),b?.includeDetails&&d.set("includeDetails","true");let e=d.toString();return c(`/api/v1/metered/${a}/analytics${e?`?${e}`:""}`)}},"apiKeysApi",0,{list:()=>c("/api/v1/auth/keys"),create:a=>c("/api/v1/auth/keys",{method:"POST",body:JSON.stringify(a)}),revoke:a=>c(`/api/v1/auth/keys/${a}`,{method:"DELETE"})},"billingApi",0,{getUsage:a=>{let b=new URLSearchParams;a?.startDate&&b.set("startDate",a.startDate),a?.endDate&&b.set("endDate",a.endDate),a?.periodType&&b.set("periodType",a.periodType),a?.customerId&&b.set("customerId",a.customerId);let d=b.toString();return c(`/api/v1/billing/usage${d?`?${d}`:""}`)},getReport:a=>{let b=new URLSearchParams;a?.startDate&&b.set("startDate",a.startDate),a?.endDate&&b.set("endDate",a.endDate),a?.periodType&&b.set("periodType",a.periodType),a?.endpointIds&&b.set("endpointIds",a.endpointIds.join(","));let d=b.toString();return c(`/api/v1/billing/report${d?`?${d}`:""}`)},getInvoice:a=>{let b=new URLSearchParams;a?.startDate&&b.set("startDate",a.startDate),a?.endDate&&b.set("endDate",a.endDate),a?.periodType&&b.set("periodType",a.periodType),a?.customerId&&b.set("customerId",a.customerId);let d=b.toString();return c(`/api/v1/billing/invoice${d?`?${d}`:""}`)}},"cronJobsApi",0,{list:a=>{let b=new URLSearchParams;a?.jobId&&b.set("jobId",a.jobId),a?.limit&&b.set("limit",a.limit.toString()),a?.includeRuns===!1&&b.set("includeRuns","false"),a?.onlyFailing&&b.set("onlyFailing","true");let d=b.toString();return c(`/api/v1/cron-jobs${d?`?${d}`:""}`)},trigger:a=>c("/api/v1/cron-jobs",{method:"POST",body:JSON.stringify({jobId:a})})},"endpointsApi",0,{list:()=>c("/api/v1/endpoints"),get:a=>c(`/api/v1/endpoints/${a}`),create:a=>c("/api/v1/endpoints",{method:"POST",body:JSON.stringify(a)}),update:(a,b)=>c(`/api/v1/endpoints/${a}`,{method:"PATCH",body:JSON.stringify(b)}),delete:a=>c(`/api/v1/endpoints/${a}`,{method:"DELETE"}),getStats:a=>c(`/api/v1/endpoints/${a}/stats`)},"monitoringApi",0,{getMetrics:a=>{let b=new URLSearchParams;a?.name&&b.set("name",a.name),a?.startTime&&b.set("startTime",a.startTime.toString()),a?.endTime&&b.set("endTime",a.endTime.toString()),a?.tags&&b.set("tags",JSON.stringify(a.tags)),a?.recent&&b.set("recent","true"),a?.limit&&b.set("limit",a.limit.toString());let d=b.toString();return c(`/api/v1/monitoring/metrics${d?`?${d}`:""}`)},getAlerts:a=>{let b=new URLSearchParams;return!1!==a&&b.set("includeRules","true"),c(`/api/v1/monitoring/alerts?${b.toString()}`)},createAlertRule:a=>c("/api/v1/monitoring/alerts",{method:"POST",body:JSON.stringify(a)}),deleteAlertRule:a=>c(`/api/v1/monitoring/alerts/${a}`,{method:"DELETE"})},"onboardingApi",0,{getStatus:()=>c("/api/v1/user/onboarding"),completeStep:a=>c("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({stepId:a})}),dismiss:()=>c("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({dismiss:!0})})},"webhooksApi",0,{list:a=>{let b=new URLSearchParams;a&&b.set("endpointId",a);let d=b.toString();return c(`/api/v1/webhooks${d?`?${d}`:""}`)},create:a=>c("/api/v1/webhooks",{method:"POST",body:JSON.stringify(a)}),update:(a,b)=>c(`/api/v1/webhooks/${a}`,{method:"PATCH",body:JSON.stringify(b)}),delete:a=>c(`/api/v1/webhooks/${a}`,{method:"DELETE"})}])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},78860,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(91938),e=a.i(59407),f=a.i(96221),g=a.i(92e3),h=a.i(15618),i=a.i(70106);let j=(0,i.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),k=(0,i.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var l=a.i(16201),m=a.i(5151);function n(){let[a,i]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null);(0,c.useEffect)(()=>{A()},[]);let A=async()=>{try{r(!0),t(null);let[a,b]=await Promise.all([d.webhooksApi.list(),d.endpointsApi.list()]);i(a.webhooks||[]),n(b.endpoints||[])}catch(a){B(a)}finally{r(!1)}},B=a=>{a instanceof d.ApiError?t(401===a.status?"Invalid API key. Please check your API key and try again.":`${a.message} (Status: ${a.status}, Code: ${a.code})`):a instanceof Error?t(`Failed to load data: ${a.message}`):t("Failed to load data: Unknown error")},C=async a=>{if(confirm("Are you sure you want to delete this webhook?"))try{await d.webhooksApi.delete(a),A()}catch(a){alert(a instanceof d.ApiError?a.message:"Failed to delete webhook")}};return q?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-lime-400"}),(0,b.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading webhooks..."})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Webhooks"}),(0,b.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center gap-2 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"Create Webhook"]})]}),s&&(0,b.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg flex items-center gap-3",children:[(0,b.jsx)(g.AlertCircle,{className:"w-5 h-5 text-red-400"}),(0,b.jsx)("span",{className:"text-red-400",children:s})]}),u&&(0,b.jsx)(o,{endpoints:m,onClose:()=>{v(!1),A()}}),w&&(0,b.jsx)(p,{webhook:a.find(a=>a.id===w),endpoints:m,onClose:()=>{x(null),A()}}),0===a.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-gray-900 rounded-lg border border-gray-800",children:[(0,b.jsx)(e.Webhook,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-400 mb-4",children:"No webhooks configured"}),(0,b.jsx)("button",{onClick:()=>v(!0),className:"px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:"Create Your First Webhook"})]}):(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsx)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:a.url}),a.enabled?(0,b.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-green-900/30 text-green-400 flex items-center gap-1",children:[(0,b.jsx)(l.CheckCircle,{className:"w-3 h-3"}),"Enabled"]}):(0,b.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-400",children:"Disabled"})]}),a.endpointId&&(0,b.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Endpoint: ",m.find(b=>b.id===a.endpointId)?.name||a.endpointId]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:a.events.map(a=>(0,b.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-300",children:a},a))})]}),(0,b.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,b.jsxs)("button",{onClick:()=>x(a.id),className:"px-3 py-1.5 text-sm bg-gray-800 text-gray-300 rounded hover:bg-gray-700 transition-colors flex items-center gap-1",children:[(0,b.jsx)(k,{className:"w-4 h-4"}),"Edit"]}),(0,b.jsxs)("button",{onClick:()=>C(a.id),className:"px-3 py-1.5 text-sm bg-red-900/20 text-red-400 rounded hover:bg-red-900/30 transition-colors flex items-center gap-1",children:[(0,b.jsx)(j,{className:"w-4 h-4"}),"Delete"]})]})]})},a.id))})]})}function o({endpoints:a,onClose:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)({url:"",events:[],endpointId:"",enabled:!0}),l=async a=>{a.preventDefault(),g(!0);try{let a=await d.webhooksApi.create({url:j.url,events:j.events,endpointId:j.endpointId||void 0,enabled:j.enabled});i(a)}catch(a){alert(a instanceof d.ApiError?a.message:"Failed to create webhook")}finally{g(!1)}};return h?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-md w-full mx-4",children:[(0,b.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Webhook Created!"}),(0,b.jsx)("p",{className:"text-yellow-400 mb-4 text-sm",children:"⚠️ Save this secret securely. It will not be shown again."}),h.secret&&(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"Secret:"}),(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(h.secret),alert("Copied to clipboard!")},className:"text-lime-400 hover:text-lime-300",children:(0,b.jsx)(m.Copy,{className:"w-4 h-4"})})]}),(0,b.jsx)("code",{className:"text-lime-400 break-all text-sm",children:h.secret})]}),(0,b.jsx)("button",{onClick:e,className:"w-full px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:"Done"})]})}):(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Create Webhook"}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Webhook URL *"}),(0,b.jsx)("input",{type:"url",required:!0,value:j.url,onChange:a=>k({...j,url:a.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400",placeholder:"https://your-webhook-url.com/webhook"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Endpoint (Optional)"}),(0,b.jsxs)("select",{value:j.endpointId,onChange:a=>k({...j,endpointId:a.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400",children:[(0,b.jsx)("option",{value:"",children:"All endpoints"}),a.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," (",a.id,")"]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Events *"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["payment.verified","payment.failed","usage.recorded","session.completed","endpoint.created","endpoint.updated","endpoint.deleted"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:j.events.includes(a),onChange:()=>{k({...j,events:j.events.includes(a)?j.events.filter(b=>b!==a):[...j.events,a]})},className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},a))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:f||0===j.events.length,className:"flex-1 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors disabled:opacity-50",children:f?"Creating...":"Create Webhook"}),(0,b.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})}function p({webhook:a,endpoints:e,onClose:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)({url:a?.url||"",events:a?.events||[],enabled:a?.enabled!==!1}),k=async b=>{b.preventDefault(),h(!0);try{await d.webhooksApi.update(a.id,i),f()}catch(a){alert(a instanceof d.ApiError?a.message:"Failed to update webhook")}finally{h(!1)}};return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Edit Webhook"}),(0,b.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Webhook URL *"}),(0,b.jsx)("input",{type:"url",required:!0,value:i.url,onChange:a=>j({...i,url:a.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400"})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.enabled,onChange:a=>j({...i,enabled:a.target.checked}),className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-300",children:"Enabled"})]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Events *"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["payment.verified","payment.failed","usage.recorded","session.completed","endpoint.created","endpoint.updated","endpoint.deleted"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.events.includes(a),onChange:()=>{j({...i,events:i.events.includes(a)?i.events.filter(b=>b!==a):[...i.events,a]})},className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},a))})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:g||0===i.events.length,className:"flex-1 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors disabled:opacity-50",children:g?"Updating...":"Update Webhook"}),(0,b.jsx)("button",{type:"button",onClick:f,className:"flex-1 px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})}):null}a.s(["default",()=>n],78860)}];

//# sourceMappingURL=_b0d8c48b._.js.map