module.exports=[49368,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(1027),f=a.i(69520),g=a.i(33508),h=a.i(52495),i=a.i(5151),j=a.i(33441);let k="ep_url_enrich_demo_v1";function l(){var a;let[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(new Date),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(null),x=async()=>{try{o(!0),q(null);let a=await fetch(`/api/x402/logs?endpointId=${k}&limit=50`,{headers:{"Content-Type":"application/json"}});if(!a.ok){let b=`HTTP ${a.status}`;try{let c=await a.json();b=c.message||c.error||b}catch(c){b=a.statusText||b}throw Error(b)}let b=await a.json();if(!b.success)throw Error(b.error||"Failed to fetch logs");m(b.logs||[]),s(new Date)}catch(a){q(a instanceof Error?a.message:"Failed to fetch logs"),console.error("Error fetching logs:",a)}finally{o(!1)}};(0,c.useEffect)(()=>{x();let a=setInterval(x,5e3);return()=>clearInterval(a)},[]);let y=a=>a<1e3?`${a}ms`:`${(a/1e3).toFixed(2)}s`,z=(a,b)=>{let c=("USDC"===b||b.includes("0x"),6),d=BigInt(a),e=BigInt(10**c),f=d/e,g=d%e;if(g===BigInt(0))return`${f} ${b}`;let h=g.toString().padStart(c,"0").replace(/0+$/,"");return`${f}.${h} ${b}`},A=(a,b)=>b.includes("8453")||b.includes("84532")?`https://basescan.org/tx/${a}`:b.includes("1")?`https://etherscan.io/tx/${a}`:null,B=async(a,b)=>{try{await navigator.clipboard.writeText(a),w(b),setTimeout(()=>w(null),2e3)}catch(a){console.error("Failed to copy:",a)}},C=a=>{let b=new Date(a);return{date:b.toLocaleDateString(),time:b.toLocaleTimeString(),iso:b.toISOString(),relative:D(b)}},D=a=>{let b=Math.floor((new Date().getTime()-a.getTime())/1e3),c=Math.floor(b/60),d=Math.floor(c/60),e=Math.floor(d/24);return b<60?`${b} second${1!==b?"s":""} ago`:c<60?`${c} minute${1!==c?"s":""} ago`:d<24?`${d} hour${1!==d?"s":""} ago`:`${e} day${1!==e?"s":""} ago`};return(0,b.jsxs)("div",{className:"min-h-screen bg-infra-950 text-infra-100",children:[(0,b.jsx)("nav",{className:"sticky top-0 z-50 border-b border-infra-800 glass",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsxs)(d.default,{href:"/",className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-coinbase flex items-center justify-center glow-coinbase",children:(0,b.jsx)(e.Zap,{className:"w-5 h-5 text-white"})}),(0,b.jsx)("span",{className:"text-lg font-bold text-white",children:"NexFlow"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/dashboard",className:"text-sm text-infra-400 hover:text-infra-100 transition-colors",children:"Dashboard"}),(0,b.jsx)(d.default,{href:"/docs",className:"text-sm text-infra-400 hover:text-infra-100 transition-colors",children:"API Docs"})]})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2 text-white",children:"x402 Calls Dashboard"}),(0,b.jsxs)("p",{className:"text-infra-400",children:["Endpoint: ",(0,b.jsx)("code",{className:"bg-infra-800 px-2 py-1 rounded text-infra-200",children:k})]})]}),(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("button",{onClick:x,disabled:n,className:"px-4 py-2 bg-cyan-600 text-white rounded hover:bg-cyan-700 disabled:bg-infra-700 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[(0,b.jsx)(f.RefreshCw,{className:`w-4 h-4 ${n?"animate-spin":""}`}),n?"Refreshing...":"Refresh"]}),(0,b.jsxs)("span",{className:"text-sm text-infra-400",children:["Last refreshed: ",r.toLocaleTimeString()]}),(0,b.jsxs)("span",{className:"text-sm text-infra-500",children:["(Auto-refresh every ",5,"s)"]})]}),(0,b.jsxs)("div",{className:"text-sm text-infra-400",children:["Total entries: ",(0,b.jsx)("span",{className:"font-semibold text-white",children:l.length})]})]}),p&&(0,b.jsxs)("div",{className:"mb-4 p-4 bg-red-900/20 border border-red-800 rounded text-red-400",children:[(0,b.jsxs)("p",{className:"font-semibold mb-2",children:["Error: ",p]}),(0,b.jsxs)("p",{className:"text-sm text-red-300",children:["Check browser console for details. Verify the API endpoint is accessible at"," ",(0,b.jsxs)("code",{className:"bg-red-900/30 px-1 rounded",children:["/api/x402/logs?endpointId=",k]})]})]}),n&&0===l.length?(0,b.jsxs)("div",{className:"text-center py-8 text-infra-400",children:[(0,b.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400 mb-4"}),(0,b.jsx)("p",{children:"Loading logs..."})]}):0!==l.length||p?p?null:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full bg-infra-900 border border-infra-800 rounded-lg",children:[(0,b.jsx)("thead",{className:"bg-infra-800",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Time"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Error Code"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Latency"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Facilitator"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Tx Hash"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Agent ID"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-infra-800",children:l.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-infra-800 transition-colors cursor-pointer",onClick:()=>u(a),children:[(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-100",children:new Date(a.timestamp).toLocaleString()}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded ${"success"===a.status?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:a.errorCode||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:y(a.latencyMs)}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:a.facilitator}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:z(a.amount,a.asset)}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300 font-mono text-xs",children:a.x402TxHash?(0,b.jsx)("span",{className:"truncate max-w-xs inline-block",title:a.x402TxHash,children:a.x402TxHash}):"-"}),(0,b.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:a.agentId||"-"})]},a.id))})]})}):(0,b.jsxs)("div",{className:"text-center py-8 text-infra-400",children:[(0,b.jsx)("p",{className:"text-lg mb-2",children:"No logs found"}),(0,b.jsx)("p",{className:"text-sm mb-4",children:"Make some calls to the endpoint to see logs here."}),(0,b.jsxs)("p",{className:"text-xs text-infra-500",children:["Try: ",(0,b.jsx)("code",{className:"bg-infra-800 px-2 py-1 rounded",children:"POST /api/v1/metered/url-enrich"})]})]}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>u(null),children:(0,b.jsxs)("div",{className:"bg-infra-900 border border-infra-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-infra-900 border-b border-infra-800 px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:"Payment Details"}),(0,b.jsx)("button",{onClick:()=>u(null),className:"text-infra-400 hover:text-infra-100 transition-colors",children:(0,b.jsx)(g.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`px-3 py-1 text-sm font-semibold rounded ${"success"===t.status?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:t.status.toUpperCase()}),t.errorCode&&(0,b.jsxs)("span",{className:"text-sm text-infra-400",children:["Error: ",(0,b.jsx)("code",{className:"text-red-400",children:t.errorCode})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Timestamp"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("p",{className:"text-sm text-infra-100",children:[C(t.timestamp).date," at ",C(t.timestamp).time]}),(0,b.jsxs)("span",{className:"text-xs text-infra-500",children:["(",C(t.timestamp).relative,")"]}),(0,b.jsx)("button",{onClick:()=>B(t.timestamp,"timestamp"),className:"ml-2 text-infra-400 hover:text-infra-100 transition-colors",title:"Copy ISO timestamp",children:"timestamp"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Amount"}),(0,b.jsx)("p",{className:"text-sm text-infra-100 font-mono",children:z(t.amount,t.asset)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Asset"}),(0,b.jsx)("p",{className:"text-sm text-infra-100",children:t.asset})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Network"}),(0,b.jsx)("p",{className:"text-sm text-infra-100",children:(a=t.chainId).includes("8453")?"Base Mainnet":a.includes("84532")?"Base Sepolia":a.includes("1")?"Ethereum Mainnet":a})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Facilitator"}),(0,b.jsx)("p",{className:"text-sm text-infra-100",children:t.facilitator})]})]}),t.x402TxHash&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Transaction Hash"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:t.x402TxHash}),(0,b.jsx)("button",{onClick:()=>B(t.x402TxHash,"txHash"),className:"text-infra-400 hover:text-infra-100 transition-colors",title:"Copy transaction hash",children:"txHash"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})}),A(t.x402TxHash,t.chainId)&&(0,b.jsx)("a",{href:A(t.x402TxHash,t.chainId),target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors",title:"View on block explorer",children:(0,b.jsx)(h.ExternalLink,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Performance"}),(0,b.jsxs)("p",{className:"text-sm text-infra-100",children:["Latency: ",(0,b.jsx)("span",{className:"font-mono",children:y(t.latencyMs)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Endpoint ID"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded",children:t.endpointId}),(0,b.jsx)("button",{onClick:()=>B(t.endpointId,"endpointId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"endpointId"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Log ID"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:t.id}),(0,b.jsx)("button",{onClick:()=>B(t.id,"logId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"logId"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]})]}),(t.customerId||t.agentId)&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[t.customerId&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Customer ID"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:t.customerId}),(0,b.jsx)("button",{onClick:()=>B(t.customerId,"customerId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"customerId"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]}),t.agentId&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Agent ID"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:t.agentId}),(0,b.jsx)("button",{onClick:()=>B(t.agentId,"agentId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"agentId"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Resource URL"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:t.resource}),(0,b.jsx)("button",{onClick:()=>B(t.resource,"resource"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"resource"===v?(0,b.jsx)(j.Check,{className:"w-4 h-4 text-green-400"}):(0,b.jsx)(i.Copy,{className:"w-4 h-4"})})]})]})]}),(0,b.jsx)("div",{className:"sticky bottom-0 bg-infra-900 border-t border-infra-800 px-6 py-4 flex justify-end",children:(0,b.jsx)("button",{onClick:()=>u(null),className:"px-4 py-2 bg-infra-800 text-infra-100 rounded hover:bg-infra-700 transition-colors",children:"Close"})})]})})]})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=src_app_dashboard_x402_page_tsx_f06a94ba._.js.map