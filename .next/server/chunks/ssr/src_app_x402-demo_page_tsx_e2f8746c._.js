module.exports=[75567,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(1027),f=a.i(25015),g=a.i(16201),h=a.i(62722),i=a.i(96221),j=a.i(5151),k=a.i(33441),l=a.i(80386),m=a.i(24669),n=a.i(59407),o=a.i(91938);function p(){let[a,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)("input"),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)([]),[I,J]=(0,c.useState)(!1),K=a=>{navigator.clipboard.writeText(a),B(!0),setTimeout(()=>B(!1),2e3)},L=async()=>{if(a.trim())try{J(!0);try{let a=await o.analyticsApi.getEndpointAnalytics("x402_demo_resource",{granularity:"day",includeDetails:!0});D(a)}catch(a){console.error("Failed to load analytics:",a)}try{let a=await o.billingApi.getUsage({periodType:"monthly"});F(a)}catch(a){console.error("Failed to load usage:",a)}try{let a=await o.webhooksApi.list();H(a.webhooks||[])}catch(a){console.error("Failed to load webhooks:",a)}}catch(a){console.error("Failed to load post-demo data:",a)}finally{J(!1)}},M=async()=>{if(!a.trim())return void z("Please enter an API key");r(!0),z(null),t("input");try{let b=await fetch("/api/v1/x402/demo/resource",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":a.trim()}}),c=await b.json();402===b.status?(v(c.accepts?.[0]||null),t("payment-required"),z("Payment required. In a real flow, you would use a wallet to pay. For this demo, NexFlow sponsors the payment automatically."),setTimeout(async()=>{try{let b=await fetch("/api/v1/x402/demo/resource",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":a.trim(),"x-payment":"demo-payment-header"}}),c=await b.json();b.ok&&c.success?(x(c),t("success"),L()):(z(c.message||c.error||"Payment verification failed"),x(c),t("error"))}catch(a){z(a.message||"Failed to verify payment"),t("error")}finally{r(!1)}},1e3)):(b.ok?(x(c),t("success")):(z(c.message||c.error||"Request failed"),x(c),t("error")),r(!1))}catch(a){z(a.message||"Failed to run demo"),t("error"),r(!1)}},N=`curl -X POST https://your-domain.com/api/v1/x402/demo/resource \\
  -H "x-api-key: ${a||"YOUR_API_KEY"}" \\
  -H "Content-Type: application/json"`,O=`import fetch from 'node-fetch'

const response = await fetch('https://your-domain.com/api/v1/x402/demo/resource', {
  method: 'POST',
  headers: {
    'x-api-key': '${a||"YOUR_API_KEY"}',
    'Content-Type': 'application/json',
  },
})

if (response.status === 402) {
  const paymentReq = await response.json()
  // Handle payment requirements
  // Then retry with x-payment header
}`;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-950 text-white",children:[(0,b.jsx)("nav",{className:"sticky top-0 z-50 border-b border-gray-800 bg-gray-950/80 backdrop-blur-xl",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsxs)(d.default,{href:"/",className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-lg bg-lime-400 flex items-center justify-center",children:(0,b.jsx)(e.Zap,{className:"w-5 h-5 text-gray-900"})}),(0,b.jsx)("span",{className:"text-lg font-bold text-white",children:"NexFlow"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(d.default,{href:"/docs",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"API Docs"}),(0,b.jsx)(d.default,{href:"/dashboard",className:"text-sm text-cyan-400 hover:text-cyan-300 transition-colors",children:"Dashboard"})]})]})})}),(0,b.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-12",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"x402 Demo"}),(0,b.jsx)("p",{className:"text-gray-400 text-lg",children:"This is a real x402 demo using NexFlow's infra. We cover your first $1 of payments."})]}),(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 mb-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"API Key"}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>p(a.target.value),placeholder:"nf_live_...",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-lime-400"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Paste your API key here. Get one from"," ",(0,b.jsx)(d.default,{href:"/dashboard",className:"text-lime-400 hover:text-lime-300",children:"your dashboard"}),"."]})]}),(0,b.jsx)("button",{onClick:M,disabled:q||!a.trim(),className:"w-full px-6 py-3 bg-lime-400 hover:bg-lime-300 text-gray-900 font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}),"Running Demo..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Play,{className:"w-5 h-5"}),"Run x402 Demo"]})}),"payment-required"===s&&u&&(0,b.jsxs)("div",{className:"mt-6 bg-blue-900/20 border border-blue-800 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(h.XCircle,{className:"w-5 h-5 text-blue-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"402 Payment Required"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Amount:"})," ",(0,b.jsxs)("span",{className:"text-white",children:[u.maxAmountRequired," (atomic units)"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Asset:"})," ",(0,b.jsx)("span",{className:"text-white",children:u.asset})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Network:"})," ",(0,b.jsx)("span",{className:"text-white",children:u.network})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Pay To:"})," ",(0,b.jsx)("span",{className:"text-white font-mono text-xs",children:u.payTo})]})]})]}),"success"===s&&w&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-green-900/20 border border-green-800 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(g.CheckCircle,{className:"w-5 h-5 text-green-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Verified!"})]}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Message:"})," ",(0,b.jsx)("span",{className:"text-white",children:w.message})]}),w.transactionHash&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"Transaction Hash:"})," ",(0,b.jsx)("span",{className:"text-white font-mono text-xs",children:w.transactionHash})]}),w.allowance&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[(0,b.jsx)("div",{className:"text-gray-400 mb-2",children:"Allowance Usage:"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{children:["Calls: ",w.allowance.callsUsed," / ",w.allowance.callsLimit]}),(0,b.jsxs)("div",{children:["Amount: ",w.allowance.amountUsed," / ",w.allowance.amountLimit," (atomic units)"]})]})]})]})]}),I?(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6 text-center",children:[(0,b.jsx)(i.Loader2,{className:"w-6 h-6 animate-spin mx-auto text-lime-400"}),(0,b.jsx)("p",{className:"mt-2 text-gray-400 text-sm",children:"Loading analytics..."})]}):(C||E)&&(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(m.TrendingUp,{className:"w-5 h-5 text-lime-400"}),"Usage & Revenue Generated"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C?.summary&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Requests"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:C.summary.totalRequests||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Payments"}),(0,b.jsx)("p",{className:"text-xl font-bold",children:C.summary.totalPayments||0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Revenue"}),(0,b.jsxs)("p",{className:"text-xl font-bold text-lime-400",children:["$",(parseFloat(C.summary.totalRevenue||"0")/1e6).toFixed(6)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"Success Rate"}),(0,b.jsxs)("p",{className:"text-xl font-bold",children:[(100*(C.summary.successRate||0)).toFixed(1),"%"]})]})]})}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["ðŸ’¡ This demo uses NexFlow's metered endpoint infrastructure. View detailed analytics in the"," ",(0,b.jsx)(d.default,{href:"/dashboard/analytics",className:"text-lime-400 hover:text-lime-300",children:"Analytics dashboard"}),"."]})]}),G.length>0&&(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-6",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(n.Webhook,{className:"w-5 h-5 text-cyan-400"}),"Webhook Activity"]}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mb-3",children:"The following webhooks were triggered for this demo:"}),(0,b.jsx)("div",{className:"space-y-2",children:G.map(a=>(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.url}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:a.events.map(a=>(0,b.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-700 text-gray-300",children:a},a))})]}),a.enabled?(0,b.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-green-900/30 text-green-400",children:"Active"}):(0,b.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-700 text-gray-400",children:"Disabled"})]},a.id))}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-4",children:["ðŸ’¡ Configure webhooks in the"," ",(0,b.jsx)(d.default,{href:"/dashboard/webhooks",className:"text-cyan-400 hover:text-cyan-300",children:"Webhooks dashboard"}),"."]})]})]}),"error"===s&&(0,b.jsxs)("div",{className:"mt-6 bg-red-900/20 border border-red-800 rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(h.XCircle,{className:"w-5 h-5 text-red-400"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Error"})]}),(0,b.jsx)("div",{className:"text-sm text-red-400",children:y||w?.message||w?.code||"Unknown error"}),w?.limits&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-800",children:[(0,b.jsx)("div",{className:"text-gray-400 mb-2",children:"Current Limits:"}),(0,b.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,b.jsxs)("div",{children:["Calls: ",w.limits.callsUsed," / ",w.limits.callsLimit]}),(0,b.jsxs)("div",{children:["Amount: ",w.limits.amountUsed," / ",w.limits.amountLimit," (atomic units)"]})]})]})]}),(0,b.jsxs)("div",{className:"mt-12 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Code Examples"}),(0,b.jsxs)("button",{onClick:()=>K(N),className:"text-sm text-gray-400 hover:text-white flex items-center gap-2",children:[A?(0,b.jsx)(k.Check,{className:"w-4 h-4"}):(0,b.jsx)(j.Copy,{className:"w-4 h-4"}),"Copy"]})]}),(0,b.jsxs)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(l.Terminal,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-400",children:"cURL"})]}),(0,b.jsx)("pre",{className:"text-sm text-gray-300 overflow-x-auto",children:(0,b.jsx)("code",{children:N})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"TypeScript"}),(0,b.jsxs)("button",{onClick:()=>K(O),className:"text-sm text-gray-400 hover:text-white flex items-center gap-2",children:[A?(0,b.jsx)(k.Check,{className:"w-4 h-4"}):(0,b.jsx)(j.Copy,{className:"w-4 h-4"}),"Copy"]})]}),(0,b.jsx)("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:(0,b.jsx)("pre",{className:"text-sm text-gray-300 overflow-x-auto",children:(0,b.jsx)("code",{children:O})})})]})]})]})]})}a.s(["default",()=>p])}];

//# sourceMappingURL=src_app_x402-demo_page_tsx_e2f8746c._.js.map