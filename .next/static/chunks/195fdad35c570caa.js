(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},41931,e=>{"use strict";e.i(47167).default.env.NEXT_PUBLIC_API_URL;class t extends Error{status;code;details;constructor(e,t,s,a){super(s),this.status=e,this.code=t,this.details=a,this.name="ApiError"}}async function s(e,a={}){let r=localStorage.getItem("api_key");if(!r)throw new t(401,"UNAUTHORIZED","API key not found. Please set your API key in settings.");let i=await fetch(e,{...a,headers:{"Content-Type":"application/json","x-api-key":r,...a.headers}}),l=await i.json().catch(()=>({}));if(!i.ok)throw new t(i.status,l.code||"UNKNOWN_ERROR",l.error||l.message||`Request failed with status ${i.status}`,l.details);return l}e.s(["ApiError",()=>t,"analyticsApi",0,{getEndpointAnalytics:(e,t)=>{let a=new URLSearchParams;t?.startDate&&a.set("startDate",t.startDate),t?.endDate&&a.set("endDate",t.endDate),t?.granularity&&a.set("granularity",t.granularity),t?.includeDetails&&a.set("includeDetails","true");let r=a.toString();return s(`/api/v1/metered/${e}/analytics${r?`?${r}`:""}`)}},"apiKeysApi",0,{list:()=>s("/api/v1/auth/keys"),create:e=>s("/api/v1/auth/keys",{method:"POST",body:JSON.stringify(e)}),revoke:e=>s(`/api/v1/auth/keys/${e}`,{method:"DELETE"})},"billingApi",0,{getUsage:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/usage${a?`?${a}`:""}`)},getReport:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.endpointIds&&t.set("endpointIds",e.endpointIds.join(","));let a=t.toString();return s(`/api/v1/billing/report${a?`?${a}`:""}`)},getInvoice:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/invoice${a?`?${a}`:""}`)}},"cronJobsApi",0,{list:e=>{let t=new URLSearchParams;e?.jobId&&t.set("jobId",e.jobId),e?.limit&&t.set("limit",e.limit.toString()),e?.includeRuns===!1&&t.set("includeRuns","false"),e?.onlyFailing&&t.set("onlyFailing","true");let a=t.toString();return s(`/api/v1/cron-jobs${a?`?${a}`:""}`)},trigger:e=>s("/api/v1/cron-jobs",{method:"POST",body:JSON.stringify({jobId:e})})},"endpointsApi",0,{list:()=>s("/api/v1/endpoints"),get:e=>s(`/api/v1/endpoints/${e}`),create:e=>s("/api/v1/endpoints",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/endpoints/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/endpoints/${e}`,{method:"DELETE"}),getStats:e=>s(`/api/v1/endpoints/${e}/stats`)},"monitoringApi",0,{getMetrics:e=>{let t=new URLSearchParams;e?.name&&t.set("name",e.name),e?.startTime&&t.set("startTime",e.startTime.toString()),e?.endTime&&t.set("endTime",e.endTime.toString()),e?.tags&&t.set("tags",JSON.stringify(e.tags)),e?.recent&&t.set("recent","true"),e?.limit&&t.set("limit",e.limit.toString());let a=t.toString();return s(`/api/v1/monitoring/metrics${a?`?${a}`:""}`)},getAlerts:e=>{let t=new URLSearchParams;return!1!==e&&t.set("includeRules","true"),s(`/api/v1/monitoring/alerts?${t.toString()}`)},createAlertRule:e=>s("/api/v1/monitoring/alerts",{method:"POST",body:JSON.stringify(e)}),deleteAlertRule:e=>s(`/api/v1/monitoring/alerts/${e}`,{method:"DELETE"})},"onboardingApi",0,{getStatus:()=>s("/api/v1/user/onboarding"),completeStep:e=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({stepId:e})}),dismiss:()=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({dismiss:!0})})},"webhooksApi",0,{list:e=>{let t=new URLSearchParams;e&&t.set("endpointId",e);let a=t.toString();return s(`/api/v1/webhooks${a?`?${a}`:""}`)},create:e=>s("/api/v1/webhooks",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/webhooks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/webhooks/${e}`,{method:"DELETE"})}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},82831,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(41931),r=e.i(17923),i=e.i(31278),l=e.i(63209),n=e.i(25652),d=e.i(3116),c=e.i(69638),o=e.i(12426);function m(){let[e,m]=(0,s.useState)([]),[x,g]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[y,u]=(0,s.useState)(!0),[b,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)(null),[f,S]=(0,s.useState)("day"),[w,T]=(0,s.useState)(7);(0,s.useEffect)(()=>{k()},[]),(0,s.useEffect)(()=>{x&&D()},[x,f,w]);let k=async()=>{try{u(!0),v(null);let e=await a.endpointsApi.list();m(e.endpoints||[]),e.endpoints&&e.endpoints.length>0&&!x&&g(e.endpoints[0].id)}catch(e){A(e)}finally{u(!1)}},D=async()=>{if(x)try{j(!0),v(null);let e=new Date,t=new Date;t.setDate(t.getDate()-w);let s=await a.analyticsApi.getEndpointAnalytics(x,{startDate:t.toISOString(),endDate:e.toISOString(),granularity:f,includeDetails:!0});p(s)}catch(e){A(e)}finally{j(!1)}},A=e=>{e instanceof a.ApiError?v(401===e.status?"Invalid API key. Please check your API key and try again.":403===e.status?"Access denied. Your API key may not have the required permissions.":`${e.message} (Status: ${e.status}, Code: ${e.code})`):e instanceof Error?e.message.includes("Failed to fetch")||e.message.includes("NetworkError")?v("Cannot connect to server. Make sure the server is running on http://localhost:3001"):v(`Failed to load data: ${e.message}`):v("Failed to load data: Unknown error")},P=e=>new Intl.NumberFormat().format(e),R=e=>{let t=parseFloat(e)/1e6;return`$${t.toFixed(6)}`},$=e=>e<1e3?`${Math.round(e)}ms`:`${(e/1e3).toFixed(2)}s`;return y?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-lime-400"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading endpoints..."})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Analytics"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("select",{value:w,onChange:e=>T(parseInt(e.target.value)),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[(0,t.jsx)("option",{value:1,children:"Last 24 hours"}),(0,t.jsx)("option",{value:7,children:"Last 7 days"}),(0,t.jsx)("option",{value:30,children:"Last 30 days"}),(0,t.jsx)("option",{value:90,children:"Last 90 days"})]}),(0,t.jsxs)("select",{value:f,onChange:e=>S(e.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[(0,t.jsx)("option",{value:"hour",children:"Hourly"}),(0,t.jsx)("option",{value:"day",children:"Daily"}),(0,t.jsx)("option",{value:"week",children:"Weekly"})]})]})]}),N&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg flex items-center gap-3",children:[(0,t.jsx)(l.AlertCircle,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("span",{className:"text-red-400",children:N})]}),e.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Endpoint"}),(0,t.jsx)("select",{value:x||"",onChange:e=>g(e.target.value),className:"w-full md:w-96 px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:e.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-900 rounded-lg border border-gray-800",children:[(0,t.jsx)(r.BarChart3,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:"No endpoints available"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Create an endpoint to see analytics"})]}):b?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-lime-400"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading analytics..."})]}):h?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(n.TrendingUp,{className:"w-5 h-5 text-lime-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Requests"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:P(h.summary?.totalRequests||0)})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(c.CheckCircle,{className:"w-5 h-5 text-green-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Payments"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:P(h.summary?.totalPayments||0)})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(o.DollarSign,{className:"w-5 h-5 text-cyan-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Revenue"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:R(h.summary?.totalRevenue||"0")})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(d.Clock,{className:"w-5 h-5 text-blue-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Avg Latency"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:$(h.summary?.averageResponseTime||0)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Success Rate"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"h-4 bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-green-500 transition-all",style:{width:`${100*(h.summary?.successRate||0)}%`}})})}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-green-400",children:[(100*(h.summary?.successRate||0)).toFixed(1),"%"]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Error Rate"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("div",{className:"h-4 bg-gray-800 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-red-500 transition-all",style:{width:`${100*(h.summary?.errorRate||0)}%`}})})}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-red-400",children:[(100*(h.summary?.errorRate||0)).toFixed(1),"%"]})]})]})]}),h.performance&&(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Performance Metrics"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"P50 Latency"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:$(h.performance.latency?.p50||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"P95 Latency"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:$(h.performance.latency?.p95||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"P99 Latency"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:$(h.performance.latency?.p99||0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Average"}),(0,t.jsx)("p",{className:"text-xl font-bold",children:$(h.performance.latency?.average||0)})]})]})]}),h.breakdowns&&(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"By Status"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(h.breakdowns.byStatus||{}).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400 capitalize",children:e}),(0,t.jsx)("span",{className:"font-semibold",children:P(s)})]},e))})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"By Facilitator"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(h.breakdowns.byFacilitator||{}).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:e}),(0,t.jsx)("span",{className:"font-semibold",children:P(s)})]},e))})]})]}),h.timeSeries&&Object.keys(h.timeSeries).length>0&&(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Time Series Data"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,t.jsx)("th",{className:"text-left py-2 text-gray-400",children:"Time"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Requests"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Payments"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Revenue"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Errors"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Avg Latency"})]})}),(0,t.jsx)("tbody",{children:Object.entries(h.timeSeries).sort(([e],[t])=>e.localeCompare(t)).map(([e,s])=>(0,t.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,t.jsx)("td",{className:"py-2 text-gray-300",children:new Date(e).toLocaleString()}),(0,t.jsx)("td",{className:"py-2 text-right",children:P(s.requests||0)}),(0,t.jsx)("td",{className:"py-2 text-right",children:P(s.payments||0)}),(0,t.jsx)("td",{className:"py-2 text-right",children:R(s.revenue||"0")}),(0,t.jsx)("td",{className:"py-2 text-right text-red-400",children:P(s.errors||0)}),(0,t.jsx)("td",{className:"py-2 text-right",children:$(s.averageLatency||0)})]},e))})]})})]})]}):(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-900 rounded-lg border border-gray-800",children:[(0,t.jsx)(r.BarChart3,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Select an endpoint to view analytics"})]})]})}e.s(["default",()=>m])}]);