(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41931,e=>{"use strict";e.i(47167).default.env.NEXT_PUBLIC_API_URL;class t extends Error{status;code;details;constructor(e,t,s,a){super(s),this.status=e,this.code=t,this.details=a,this.name="ApiError"}}async function s(e,a={}){let i=localStorage.getItem("api_key");if(!i)throw new t(401,"UNAUTHORIZED","API key not found. Please set your API key in settings.");let r=await fetch(e,{...a,headers:{"Content-Type":"application/json","x-api-key":i,...a.headers}}),n=await r.json().catch(()=>({}));if(!r.ok)throw new t(r.status,n.code||"UNKNOWN_ERROR",n.error||n.message||`Request failed with status ${r.status}`,n.details);return n}e.s(["ApiError",()=>t,"analyticsApi",0,{getEndpointAnalytics:(e,t)=>{let a=new URLSearchParams;t?.startDate&&a.set("startDate",t.startDate),t?.endDate&&a.set("endDate",t.endDate),t?.granularity&&a.set("granularity",t.granularity),t?.includeDetails&&a.set("includeDetails","true");let i=a.toString();return s(`/api/v1/metered/${e}/analytics${i?`?${i}`:""}`)}},"apiKeysApi",0,{list:()=>s("/api/v1/auth/keys"),create:e=>s("/api/v1/auth/keys",{method:"POST",body:JSON.stringify(e)}),revoke:e=>s(`/api/v1/auth/keys/${e}`,{method:"DELETE"})},"billingApi",0,{getUsage:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/usage${a?`?${a}`:""}`)},getReport:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.endpointIds&&t.set("endpointIds",e.endpointIds.join(","));let a=t.toString();return s(`/api/v1/billing/report${a?`?${a}`:""}`)},getInvoice:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/invoice${a?`?${a}`:""}`)}},"cronJobsApi",0,{list:e=>{let t=new URLSearchParams;e?.jobId&&t.set("jobId",e.jobId),e?.limit&&t.set("limit",e.limit.toString()),e?.includeRuns===!1&&t.set("includeRuns","false"),e?.onlyFailing&&t.set("onlyFailing","true");let a=t.toString();return s(`/api/v1/cron-jobs${a?`?${a}`:""}`)},trigger:e=>s("/api/v1/cron-jobs",{method:"POST",body:JSON.stringify({jobId:e})})},"endpointsApi",0,{list:()=>s("/api/v1/endpoints"),get:e=>s(`/api/v1/endpoints/${e}`),create:e=>s("/api/v1/endpoints",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/endpoints/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/endpoints/${e}`,{method:"DELETE"}),getStats:e=>s(`/api/v1/endpoints/${e}/stats`)},"monitoringApi",0,{getMetrics:e=>{let t=new URLSearchParams;e?.name&&t.set("name",e.name),e?.startTime&&t.set("startTime",e.startTime.toString()),e?.endTime&&t.set("endTime",e.endTime.toString()),e?.tags&&t.set("tags",JSON.stringify(e.tags)),e?.recent&&t.set("recent","true"),e?.limit&&t.set("limit",e.limit.toString());let a=t.toString();return s(`/api/v1/monitoring/metrics${a?`?${a}`:""}`)},getAlerts:e=>{let t=new URLSearchParams;return!1!==e&&t.set("includeRules","true"),s(`/api/v1/monitoring/alerts?${t.toString()}`)},createAlertRule:e=>s("/api/v1/monitoring/alerts",{method:"POST",body:JSON.stringify(e)}),deleteAlertRule:e=>s(`/api/v1/monitoring/alerts/${e}`,{method:"DELETE"})},"onboardingApi",0,{getStatus:()=>s("/api/v1/user/onboarding"),completeStep:e=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({stepId:e})}),dismiss:()=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({dismiss:!0})})},"webhooksApi",0,{list:e=>{let t=new URLSearchParams;e&&t.set("endpointId",e);let a=t.toString();return s(`/api/v1/webhooks${a?`?${a}`:""}`)},create:e=>s("/api/v1/webhooks",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/webhooks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/webhooks/${e}`,{method:"DELETE"})}])},65121,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(41931);function i(){let[e,i]=(0,s.useState)(null),[r,n]=(0,s.useState)(!0),[d,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(""),[m,p]=(0,s.useState)([]);async function x(){try{let e=await a.endpointsApi.list();p(e.endpoints||[]),e.endpoints&&e.endpoints.length>0&&c(e.endpoints[0].id)}catch(e){l(e.message)}}async function u(){if(o){n(!0),l(null);try{let e=await a.endpointsApi.getStats(o),t={totalRequests:e.stats?.totalRequests||0,successfulRequests:e.stats?.totalRequests-(e.stats?.totalPayments||0),failedRequests:0,totalRevenue:e.stats?.totalRevenue||"0",averageLatency:e.stats?.averageResponseTime||0,requestsByHour:[],failuresByCode:{},recentTransactions:(e.recentPayments||[]).map(e=>({txHash:e.txHash,timestamp:e.verifiedAt,amount:e.amount,customerId:e.fromAddress?.substring(0,10)+"..."}))};i(t)}catch(e){l(e.message)}finally{n(!1)}}}function h(e){let t=BigInt(e),s=BigInt(1e6);return`${t/s}.${(t%s).toString().padStart(6,"0")}`}return((0,s.useEffect)(()=>{x()},[]),(0,s.useEffect)(()=>{o&&u()},[o]),r&&!e)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Operations Dashboard"}),(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading operations data..."})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Operations Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Real-time traffic, failures, and revenue for paid endpoints"})]}),d&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded mb-6",children:[(0,t.jsx)("strong",{children:"Error:"})," ",d]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Endpoint"}),(0,t.jsx)("select",{value:o,onChange:e=>c(e.target.value),className:"block w-full max-w-md rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:m.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))})]}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Requests"}),(0,t.jsx)("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:e.totalRequests})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Successful"}),(0,t.jsx)("div",{className:"mt-2 text-3xl font-bold text-green-600",children:e.successfulRequests})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),(0,t.jsxs)("div",{className:"mt-2 text-3xl font-bold text-blue-600",children:[h(e.totalRevenue)," USDC"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Avg Latency"}),(0,t.jsxs)("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:[Math.round(e.averageLatency),"ms"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Recent Transactions"})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transaction Hash"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.recentTransactions.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-500",children:"No transactions yet. Start making paid calls to see them here."})}):e.recentTransactions.map((e,s)=>{var a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("a",{href:(a=e.txHash,`https://basescan.org/tx/${a}`),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-mono text-sm",children:[e.txHash.substring(0,16),"..."]})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[h(e.amount)," USDC"]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono",children:e.customerId}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.timestamp).toLocaleString()})]},s)})})]})})]}),Object.keys(e.failuresByCode).length>0&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Failures by Error Code"})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(e.failuresByCode).map(([e,s])=>(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm font-mono text-gray-700",children:e}),(0,t.jsx)("span",{className:"text-sm font-semibold text-red-600",children:s})]},e))})})]})]}),!e&&!r&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600",children:"No operations data available yet."}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Make some paid calls to your endpoint to see metrics here."})]})]})})}e.s(["default",()=>i])}]);