(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},41931,e=>{"use strict";e.i(47167).default.env.NEXT_PUBLIC_API_URL;class t extends Error{status;code;details;constructor(e,t,s,a){super(s),this.status=e,this.code=t,this.details=a,this.name="ApiError"}}async function s(e,a={}){let r=localStorage.getItem("api_key");if(!r)throw new t(401,"UNAUTHORIZED","API key not found. Please set your API key in settings.");let i=await fetch(e,{...a,headers:{"Content-Type":"application/json","x-api-key":r,...a.headers}}),n=await i.json().catch(()=>({}));if(!i.ok)throw new t(i.status,n.code||"UNKNOWN_ERROR",n.error||n.message||`Request failed with status ${i.status}`,n.details);return n}e.s(["ApiError",()=>t,"analyticsApi",0,{getEndpointAnalytics:(e,t)=>{let a=new URLSearchParams;t?.startDate&&a.set("startDate",t.startDate),t?.endDate&&a.set("endDate",t.endDate),t?.granularity&&a.set("granularity",t.granularity),t?.includeDetails&&a.set("includeDetails","true");let r=a.toString();return s(`/api/v1/metered/${e}/analytics${r?`?${r}`:""}`)}},"apiKeysApi",0,{list:()=>s("/api/v1/auth/keys"),create:e=>s("/api/v1/auth/keys",{method:"POST",body:JSON.stringify(e)}),revoke:e=>s(`/api/v1/auth/keys/${e}`,{method:"DELETE"})},"billingApi",0,{getUsage:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/usage${a?`?${a}`:""}`)},getReport:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.endpointIds&&t.set("endpointIds",e.endpointIds.join(","));let a=t.toString();return s(`/api/v1/billing/report${a?`?${a}`:""}`)},getInvoice:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/invoice${a?`?${a}`:""}`)}},"cronJobsApi",0,{list:e=>{let t=new URLSearchParams;e?.jobId&&t.set("jobId",e.jobId),e?.limit&&t.set("limit",e.limit.toString()),e?.includeRuns===!1&&t.set("includeRuns","false"),e?.onlyFailing&&t.set("onlyFailing","true");let a=t.toString();return s(`/api/v1/cron-jobs${a?`?${a}`:""}`)},trigger:e=>s("/api/v1/cron-jobs",{method:"POST",body:JSON.stringify({jobId:e})})},"endpointsApi",0,{list:()=>s("/api/v1/endpoints"),get:e=>s(`/api/v1/endpoints/${e}`),create:e=>s("/api/v1/endpoints",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/endpoints/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/endpoints/${e}`,{method:"DELETE"}),getStats:e=>s(`/api/v1/endpoints/${e}/stats`)},"monitoringApi",0,{getMetrics:e=>{let t=new URLSearchParams;e?.name&&t.set("name",e.name),e?.startTime&&t.set("startTime",e.startTime.toString()),e?.endTime&&t.set("endTime",e.endTime.toString()),e?.tags&&t.set("tags",JSON.stringify(e.tags)),e?.recent&&t.set("recent","true"),e?.limit&&t.set("limit",e.limit.toString());let a=t.toString();return s(`/api/v1/monitoring/metrics${a?`?${a}`:""}`)},getAlerts:e=>{let t=new URLSearchParams;return!1!==e&&t.set("includeRules","true"),s(`/api/v1/monitoring/alerts?${t.toString()}`)},createAlertRule:e=>s("/api/v1/monitoring/alerts",{method:"POST",body:JSON.stringify(e)}),deleteAlertRule:e=>s(`/api/v1/monitoring/alerts/${e}`,{method:"DELETE"})},"onboardingApi",0,{getStatus:()=>s("/api/v1/user/onboarding"),completeStep:e=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({stepId:e})}),dismiss:()=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({dismiss:!0})})},"webhooksApi",0,{list:e=>{let t=new URLSearchParams;e&&t.set("endpointId",e);let a=t.toString();return s(`/api/v1/webhooks${a?`?${a}`:""}`)},create:e=>s("/api/v1/webhooks",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/webhooks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/webhooks/${e}`,{method:"DELETE"})}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},57601,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(41931),r=e.i(53305),i=e.i(31278),n=e.i(63209),l=e.i(7233),o=e.i(75254);let d=(0,o.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),c=(0,o.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var m=e.i(69638),p=e.i(74886);function u(){let[e,o]=(0,s.useState)([]),[p,u]=(0,s.useState)([]),[h,b]=(0,s.useState)(!0),[y,f]=(0,s.useState)(null),[v,j]=(0,s.useState)(!1),[N,k]=(0,s.useState)(null),[w,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{C()},[]);let C=async()=>{try{b(!0),f(null);let[e,t]=await Promise.all([a.webhooksApi.list(),a.endpointsApi.list()]);o(e.webhooks||[]),u(t.endpoints||[])}catch(e){A(e)}finally{b(!1)}},A=e=>{e instanceof a.ApiError?f(401===e.status?"Invalid API key. Please check your API key and try again.":`${e.message} (Status: ${e.status}, Code: ${e.code})`):e instanceof Error?f(`Failed to load data: ${e.message}`):f("Failed to load data: Unknown error")},T=async e=>{if(confirm("Are you sure you want to delete this webhook?"))try{await a.webhooksApi.delete(e),C()}catch(e){alert(e instanceof a.ApiError?e.message:"Failed to delete webhook")}};return h?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(i.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-lime-400"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading webhooks..."})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Webhooks"}),(0,t.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:[(0,t.jsx)(l.Plus,{className:"w-4 h-4"}),"Create Webhook"]})]}),y&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg flex items-center gap-3",children:[(0,t.jsx)(n.AlertCircle,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("span",{className:"text-red-400",children:y})]}),v&&(0,t.jsx)(x,{endpoints:p,onClose:()=>{j(!1),C()}}),N&&(0,t.jsx)(g,{webhook:e.find(e=>e.id===N),endpoints:p,onClose:()=>{k(null),C()}}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-900 rounded-lg border border-gray-800",children:[(0,t.jsx)(r.Webhook,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:"No webhooks configured"}),(0,t.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:"Create Your First Webhook"})]}):(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsx)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:e.url}),e.enabled?(0,t.jsxs)("span",{className:"px-2 py-1 text-xs rounded bg-green-900/30 text-green-400 flex items-center gap-1",children:[(0,t.jsx)(m.CheckCircle,{className:"w-3 h-3"}),"Enabled"]}):(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-400",children:"Disabled"})]}),e.endpointId&&(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Endpoint: ",p.find(t=>t.id===e.endpointId)?.name||e.endpointId]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:e.events.map(e=>(0,t.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-gray-800 text-gray-300",children:e},e))})]}),(0,t.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,t.jsxs)("button",{onClick:()=>k(e.id),className:"px-3 py-1.5 text-sm bg-gray-800 text-gray-300 rounded hover:bg-gray-700 transition-colors flex items-center gap-1",children:[(0,t.jsx)(c,{className:"w-4 h-4"}),"Edit"]}),(0,t.jsxs)("button",{onClick:()=>T(e.id),className:"px-3 py-1.5 text-sm bg-red-900/20 text-red-400 rounded hover:bg-red-900/30 transition-colors flex items-center gap-1",children:[(0,t.jsx)(d,{className:"w-4 h-4"}),"Delete"]})]})]})},e.id))})]})}function x({endpoints:e,onClose:r}){let[i,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(null),[d,c]=(0,s.useState)({url:"",events:[],endpointId:"",enabled:!0}),m=async e=>{e.preventDefault(),n(!0);try{let e=await a.webhooksApi.create({url:d.url,events:d.events,endpointId:d.endpointId||void 0,enabled:d.enabled});o(e)}catch(e){alert(e instanceof a.ApiError?e.message:"Failed to create webhook")}finally{n(!1)}};return l?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-md w-full mx-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Webhook Created!"}),(0,t.jsx)("p",{className:"text-yellow-400 mb-4 text-sm",children:"⚠️ Save this secret securely. It will not be shown again."}),l.secret&&(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Secret:"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(l.secret),alert("Copied to clipboard!")},className:"text-lime-400 hover:text-lime-300",children:(0,t.jsx)(p.Copy,{className:"w-4 h-4"})})]}),(0,t.jsx)("code",{className:"text-lime-400 break-all text-sm",children:l.secret})]}),(0,t.jsx)("button",{onClick:r,className:"w-full px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:"Done"})]})}):(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Create Webhook"}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Webhook URL *"}),(0,t.jsx)("input",{type:"url",required:!0,value:d.url,onChange:e=>c({...d,url:e.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400",placeholder:"https://your-webhook-url.com/webhook"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Endpoint (Optional)"}),(0,t.jsxs)("select",{value:d.endpointId,onChange:e=>c({...d,endpointId:e.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400",children:[(0,t.jsx)("option",{value:"",children:"All endpoints"}),e.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.id,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Events *"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["payment.verified","payment.failed","usage.recorded","session.completed","endpoint.created","endpoint.updated","endpoint.deleted"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:d.events.includes(e),onChange:()=>{c({...d,events:d.events.includes(e)?d.events.filter(t=>t!==e):[...d.events,e]})},className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:i||0===d.events.length,className:"flex-1 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors disabled:opacity-50",children:i?"Creating...":"Create Webhook"}),(0,t.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})})}function g({webhook:e,endpoints:r,onClose:i}){let[n,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)({url:e?.url||"",events:e?.events||[],enabled:e?.enabled!==!1}),c=async t=>{t.preventDefault(),l(!0);try{await a.webhooksApi.update(e.id,o),i()}catch(e){alert(e instanceof a.ApiError?e.message:"Failed to update webhook")}finally{l(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Edit Webhook"}),(0,t.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Webhook URL *"}),(0,t.jsx)("input",{type:"url",required:!0,value:o.url,onChange:e=>d({...o,url:e.target.value}),className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-lime-400"})]}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.enabled,onChange:e=>d({...o,enabled:e.target.checked}),className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,t.jsx)("span",{className:"text-sm text-gray-300",children:"Enabled"})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Events *"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["payment.verified","payment.failed","usage.recorded","session.completed","endpoint.created","endpoint.updated","endpoint.deleted"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-750 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:o.events.includes(e),onChange:()=>{d({...o,events:o.events.includes(e)?o.events.filter(t=>t!==e):[...o.events,e]})},className:"w-4 h-4 text-lime-400 rounded focus:ring-lime-400"}),(0,t.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"submit",disabled:n||0===o.events.length,className:"flex-1 px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors disabled:opacity-50",children:n?"Updating...":"Update Webhook"}),(0,t.jsx)("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 bg-gray-800 text-gray-300 rounded-lg hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})}):null}e.s(["default",()=>u],57601)}]);