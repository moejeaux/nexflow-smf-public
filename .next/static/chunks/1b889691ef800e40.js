(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41931,e=>{"use strict";e.i(47167).default.env.NEXT_PUBLIC_API_URL;class t extends Error{status;code;details;constructor(e,t,s,a){super(s),this.status=e,this.code=t,this.details=a,this.name="ApiError"}}async function s(e,a={}){let i=localStorage.getItem("api_key");if(!i)throw new t(401,"UNAUTHORIZED","API key not found. Please set your API key in settings.");let l=await fetch(e,{...a,headers:{"Content-Type":"application/json","x-api-key":i,...a.headers}}),r=await l.json().catch(()=>({}));if(!l.ok)throw new t(l.status,r.code||"UNKNOWN_ERROR",r.error||r.message||`Request failed with status ${l.status}`,r.details);return r}e.s(["ApiError",()=>t,"analyticsApi",0,{getEndpointAnalytics:(e,t)=>{let a=new URLSearchParams;t?.startDate&&a.set("startDate",t.startDate),t?.endDate&&a.set("endDate",t.endDate),t?.granularity&&a.set("granularity",t.granularity),t?.includeDetails&&a.set("includeDetails","true");let i=a.toString();return s(`/api/v1/metered/${e}/analytics${i?`?${i}`:""}`)}},"apiKeysApi",0,{list:()=>s("/api/v1/auth/keys"),create:e=>s("/api/v1/auth/keys",{method:"POST",body:JSON.stringify(e)}),revoke:e=>s(`/api/v1/auth/keys/${e}`,{method:"DELETE"})},"billingApi",0,{getUsage:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/usage${a?`?${a}`:""}`)},getReport:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.endpointIds&&t.set("endpointIds",e.endpointIds.join(","));let a=t.toString();return s(`/api/v1/billing/report${a?`?${a}`:""}`)},getInvoice:e=>{let t=new URLSearchParams;e?.startDate&&t.set("startDate",e.startDate),e?.endDate&&t.set("endDate",e.endDate),e?.periodType&&t.set("periodType",e.periodType),e?.customerId&&t.set("customerId",e.customerId);let a=t.toString();return s(`/api/v1/billing/invoice${a?`?${a}`:""}`)}},"cronJobsApi",0,{list:e=>{let t=new URLSearchParams;e?.jobId&&t.set("jobId",e.jobId),e?.limit&&t.set("limit",e.limit.toString()),e?.includeRuns===!1&&t.set("includeRuns","false"),e?.onlyFailing&&t.set("onlyFailing","true");let a=t.toString();return s(`/api/v1/cron-jobs${a?`?${a}`:""}`)},trigger:e=>s("/api/v1/cron-jobs",{method:"POST",body:JSON.stringify({jobId:e})})},"endpointsApi",0,{list:()=>s("/api/v1/endpoints"),get:e=>s(`/api/v1/endpoints/${e}`),create:e=>s("/api/v1/endpoints",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/endpoints/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/endpoints/${e}`,{method:"DELETE"}),getStats:e=>s(`/api/v1/endpoints/${e}/stats`)},"monitoringApi",0,{getMetrics:e=>{let t=new URLSearchParams;e?.name&&t.set("name",e.name),e?.startTime&&t.set("startTime",e.startTime.toString()),e?.endTime&&t.set("endTime",e.endTime.toString()),e?.tags&&t.set("tags",JSON.stringify(e.tags)),e?.recent&&t.set("recent","true"),e?.limit&&t.set("limit",e.limit.toString());let a=t.toString();return s(`/api/v1/monitoring/metrics${a?`?${a}`:""}`)},getAlerts:e=>{let t=new URLSearchParams;return!1!==e&&t.set("includeRules","true"),s(`/api/v1/monitoring/alerts?${t.toString()}`)},createAlertRule:e=>s("/api/v1/monitoring/alerts",{method:"POST",body:JSON.stringify(e)}),deleteAlertRule:e=>s(`/api/v1/monitoring/alerts/${e}`,{method:"DELETE"})},"onboardingApi",0,{getStatus:()=>s("/api/v1/user/onboarding"),completeStep:e=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({stepId:e})}),dismiss:()=>s("/api/v1/user/onboarding",{method:"PUT",body:JSON.stringify({dismiss:!0})})},"webhooksApi",0,{list:e=>{let t=new URLSearchParams;e&&t.set("endpointId",e);let a=t.toString();return s(`/api/v1/webhooks${a?`?${a}`:""}`)},create:e=>s("/api/v1/webhooks",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>s(`/api/v1/webhooks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),delete:e=>s(`/api/v1/webhooks/${e}`,{method:"DELETE"})}])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},7342,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(41931),i=e.i(12426),l=e.i(31278),r=e.i(63209);let n=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var d=e.i(74886),o=e.i(43531),c=e.i(87316);function m(){let[e,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(null),[y,u]=(0,s.useState)(!0),[j,b]=(0,s.useState)(null),[N,v]=(0,s.useState)("monthly"),[f,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{T()},[N]);let T=async()=>{try{u(!0),b(null);let[e,t]=await Promise.all([a.billingApi.getUsage({periodType:N}),a.billingApi.getInvoice({periodType:N})]);m(e),h(t)}catch(e){R(e)}finally{u(!1)}},w=async()=>{try{b(null);let e=await a.billingApi.getReport({periodType:N});g(e)}catch(e){R(e)}},R=e=>{e instanceof a.ApiError?b(401===e.status?"Invalid API key. Please check your API key and try again.":403===e.status?"Access denied. Admin access required for revenue reports.":`${e.message} (Status: ${e.status}, Code: ${e.code})`):e instanceof Error?b(`Failed to load data: ${e.message}`):b("Failed to load data: Unknown error")},D=e=>{let t=parseFloat(e)/1e6;return`$${t.toFixed(6)}`};return y?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(l.Loader2,{className:"w-8 h-8 animate-spin mx-auto text-lime-400"}),(0,t.jsx)("p",{className:"mt-4 text-gray-400",children:"Loading billing data..."})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Billing & Usage"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("select",{value:N,onChange:e=>v(e.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white",children:[(0,t.jsx)("option",{value:"daily",children:"Daily"}),(0,t.jsx)("option",{value:"weekly",children:"Weekly"}),(0,t.jsx)("option",{value:"monthly",children:"Monthly"})]})})]}),j&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-800 rounded-lg flex items-center gap-3",children:[(0,t.jsx)(r.AlertCircle,{className:"w-5 h-5 text-red-400"}),(0,t.jsx)("span",{className:"text-red-400",children:j})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[e&&(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(c.Calendar,{className:"w-5 h-5"}),"Current Period Usage"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Requests"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.totalUsage?.totalRequests||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Payments"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.totalUsage?.totalPayments||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Revenue"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:D(e.totalUsage?.totalRevenue||"0")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Units"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:e.totalUsage?.totalUnits||0})]})]}),e.endpoints&&e.endpoints.length>0&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Usage by Endpoint"}),(0,t.jsx)("div",{className:"space-y-3",children:e.endpoints.map(e=>(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h4",{className:"font-semibold",children:e.endpointName}),(0,t.jsx)("span",{className:"text-sm text-gray-400",children:e.endpointId})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Requests:"}),(0,t.jsx)("p",{className:"font-semibold",children:e.usage.totalRequests})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Payments:"}),(0,t.jsx)("p",{className:"font-semibold",children:e.usage.totalPayments})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Revenue:"}),(0,t.jsx)("p",{className:"font-semibold",children:D(e.usage.totalRevenue)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Success Rate:"}),(0,t.jsxs)("p",{className:"font-semibold",children:[(100*e.usage.successRate).toFixed(1),"%"]})]})]})]},e.endpointId))})]})]}),x&&(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)(n,{className:"w-5 h-5"}),"Invoice"]}),(0,t.jsx)("button",{onClick:()=>{var e;return e=JSON.stringify(x,null,2),void(navigator.clipboard.writeText(e),S("invoice"),setTimeout(()=>S(null),2e3))},className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:"invoice"===f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Check,{className:"w-4 h-4 text-green-400"}),"Copied"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Copy,{className:"w-4 h-4"}),"Copy"]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Period:"}),(0,t.jsxs)("p",{className:"font-semibold",children:[new Date(x.period.startDate).toLocaleDateString()," - ",new Date(x.period.endDate).toLocaleDateString()]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Currency:"}),(0,t.jsxs)("p",{className:"font-semibold",children:[x.currency," (",x.network,")"]})]})]}),x.lineItems&&x.lineItems.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Line Items"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,t.jsx)("th",{className:"text-left py-2 text-gray-400",children:"Description"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Quantity"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Unit Price"}),(0,t.jsx)("th",{className:"text-right py-2 text-gray-400",children:"Total"})]})}),(0,t.jsx)("tbody",{children:x.lineItems.map((e,s)=>(0,t.jsxs)("tr",{className:"border-b border-gray-800",children:[(0,t.jsx)("td",{className:"py-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:e.endpointName}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.description})]})}),(0,t.jsx)("td",{className:"py-2 text-right",children:e.quantity}),(0,t.jsx)("td",{className:"py-2 text-right",children:D(e.unitPrice)}),(0,t.jsx)("td",{className:"py-2 text-right font-semibold",children:D(e.total)})]},s))}),(0,t.jsxs)("tfoot",{children:[(0,t.jsxs)("tr",{className:"border-t-2 border-gray-700",children:[(0,t.jsx)("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Subtotal:"}),(0,t.jsx)("td",{className:"py-2 text-right font-semibold",children:D(x.subtotal)})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Tax:"}),(0,t.jsx)("td",{className:"py-2 text-right font-semibold",children:D(x.tax)})]}),(0,t.jsxs)("tr",{className:"border-t-2 border-gray-700",children:[(0,t.jsx)("td",{colSpan:3,className:"py-2 text-right font-semibold text-lg",children:"Total:"}),(0,t.jsx)("td",{className:"py-2 text-right font-semibold text-lg text-lime-400",children:D(x.total)})]})]})]})})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-900 rounded-lg border border-gray-800 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)(i.DollarSign,{className:"w-5 h-5"}),"Revenue Report"]}),(0,t.jsx)("button",{onClick:w,className:"px-4 py-2 bg-lime-400 text-gray-900 rounded-lg font-medium hover:bg-lime-300 transition-colors",children:"Load Report"})]}),p?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Revenue"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:D(p.totalRevenue)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Payments"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.totalPayments})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm text-gray-400",children:"Total Requests"}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:p.totalRequests})]})]}),p.byEndpoint&&p.byEndpoint.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"By Endpoint"}),(0,t.jsx)("div",{className:"space-y-2",children:p.byEndpoint.map(e=>(0,t.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold",children:e.endpointName}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:e.endpointId})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"font-semibold",children:D(e.revenue)}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[e.payments," payments"]})]})]},e.endpointId))})]})]}):(0,t.jsx)("p",{className:"text-gray-400",children:'Click "Load Report" to view revenue breakdown'})]})]})]})}e.s(["default",()=>m],7342)}]);