(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},74886,e=>{"use strict";let t=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>t],74886)},78917,e=>{"use strict";let t=(0,e.i(75254).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],78917)},16715,e=>{"use strict";let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},4565,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(22016),r=e.i(39312),n=e.i(16715),i=e.i(37727),l=e.i(78917),c=e.i(74886),x=e.i(43531);let d="ep_url_enrich_demo_v1";function o(){var e;let[o,m]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[f,u]=(0,s.useState)(null),[j,g]=(0,s.useState)(new Date),[b,N]=(0,s.useState)(null),[w,y]=(0,s.useState)(null),v=async()=>{try{p(!0),u(null);let e=await fetch(`/api/x402/logs?endpointId=${d}&limit=50`,{headers:{"Content-Type":"application/json"}});if(!e.ok){let t=`HTTP ${e.status}`;try{let s=await e.json();t=s.message||s.error||t}catch(s){t=e.statusText||t}throw Error(t)}let t=await e.json();if(!t.success)throw Error(t.error||"Failed to fetch logs");m(t.logs||[]),g(new Date)}catch(e){u(e instanceof Error?e.message:"Failed to fetch logs"),console.error("Error fetching logs:",e)}finally{p(!1)}};(0,s.useEffect)(()=>{v();let e=setInterval(v,5e3);return()=>clearInterval(e)},[]);let k=e=>e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,C=(e,t)=>{let s=("USDC"===t||t.includes("0x"),6),a=BigInt(e),r=BigInt(10**s),n=a/r,i=a%r;if(i===BigInt(0))return`${n} ${t}`;let l=i.toString().padStart(s,"0").replace(/0+$/,"");return`${n}.${l} ${t}`},I=(e,t)=>t.includes("8453")||t.includes("84532")?`https://basescan.org/tx/${e}`:t.includes("1")?`https://etherscan.io/tx/${e}`:null,T=async(e,t)=>{try{await navigator.clipboard.writeText(e),y(t),setTimeout(()=>y(null),2e3)}catch(e){console.error("Failed to copy:",e)}},$=e=>{let t=new Date(e);return{date:t.toLocaleDateString(),time:t.toLocaleTimeString(),iso:t.toISOString(),relative:S(t)}},S=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/1e3),s=Math.floor(t/60),a=Math.floor(s/60),r=Math.floor(a/24);return t<60?`${t} second${1!==t?"s":""} ago`:s<60?`${s} minute${1!==s?"s":""} ago`:a<24?`${a} hour${1!==a?"s":""} ago`:`${r} day${1!==r?"s":""} ago`};return(0,t.jsxs)("div",{className:"min-h-screen bg-infra-950 text-infra-100",children:[(0,t.jsx)("nav",{className:"sticky top-0 z-50 border-b border-infra-800 glass",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)(a.default,{href:"/",className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-coinbase flex items-center justify-center glow-coinbase",children:(0,t.jsx)(r.Zap,{className:"w-5 h-5 text-white"})}),(0,t.jsx)("span",{className:"text-lg font-bold text-white",children:"NexFlow"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(a.default,{href:"/dashboard",className:"text-sm text-infra-400 hover:text-infra-100 transition-colors",children:"Dashboard"}),(0,t.jsx)(a.default,{href:"/docs",className:"text-sm text-infra-400 hover:text-infra-100 transition-colors",children:"API Docs"})]})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-2 text-white",children:"x402 Calls Dashboard"}),(0,t.jsxs)("p",{className:"text-infra-400",children:["Endpoint: ",(0,t.jsx)("code",{className:"bg-infra-800 px-2 py-1 rounded text-infra-200",children:d})]})]}),(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("button",{onClick:v,disabled:h,className:"px-4 py-2 bg-cyan-600 text-white rounded hover:bg-cyan-700 disabled:bg-infra-700 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[(0,t.jsx)(n.RefreshCw,{className:`w-4 h-4 ${h?"animate-spin":""}`}),h?"Refreshing...":"Refresh"]}),(0,t.jsxs)("span",{className:"text-sm text-infra-400",children:["Last refreshed: ",j.toLocaleTimeString()]}),(0,t.jsxs)("span",{className:"text-sm text-infra-500",children:["(Auto-refresh every ",5,"s)"]})]}),(0,t.jsxs)("div",{className:"text-sm text-infra-400",children:["Total entries: ",(0,t.jsx)("span",{className:"font-semibold text-white",children:o.length})]})]}),f&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-red-900/20 border border-red-800 rounded text-red-400",children:[(0,t.jsxs)("p",{className:"font-semibold mb-2",children:["Error: ",f]}),(0,t.jsxs)("p",{className:"text-sm text-red-300",children:["Check browser console for details. Verify the API endpoint is accessible at"," ",(0,t.jsxs)("code",{className:"bg-red-900/30 px-1 rounded",children:["/api/x402/logs?endpointId=",d]})]})]}),h&&0===o.length?(0,t.jsxs)("div",{className:"text-center py-8 text-infra-400",children:[(0,t.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400 mb-4"}),(0,t.jsx)("p",{children:"Loading logs..."})]}):0!==o.length||f?f?null:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full bg-infra-900 border border-infra-800 rounded-lg",children:[(0,t.jsx)("thead",{className:"bg-infra-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Time"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Error Code"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Latency"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Facilitator"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Amount"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Tx Hash"}),(0,t.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-infra-300 uppercase tracking-wider",children:"Agent ID"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-infra-800",children:o.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-infra-800 transition-colors cursor-pointer",onClick:()=>N(e),children:[(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-100",children:new Date(e.timestamp).toLocaleString()}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded ${"success"===e.status?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:e.errorCode||"-"}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:k(e.latencyMs)}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:e.facilitator}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:C(e.amount,e.asset)}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300 font-mono text-xs",children:e.x402TxHash?(0,t.jsx)("span",{className:"truncate max-w-xs inline-block",title:e.x402TxHash,children:e.x402TxHash}):"-"}),(0,t.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-infra-300",children:e.agentId||"-"})]},e.id))})]})}):(0,t.jsxs)("div",{className:"text-center py-8 text-infra-400",children:[(0,t.jsx)("p",{className:"text-lg mb-2",children:"No logs found"}),(0,t.jsx)("p",{className:"text-sm mb-4",children:"Make some calls to the endpoint to see logs here."}),(0,t.jsxs)("p",{className:"text-xs text-infra-500",children:["Try: ",(0,t.jsx)("code",{className:"bg-infra-800 px-2 py-1 rounded",children:"POST /api/v1/metered/url-enrich"})]})]}),b&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>N(null),children:(0,t.jsxs)("div",{className:"bg-infra-900 border border-infra-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-infra-900 border-b border-infra-800 px-6 py-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Payment Details"}),(0,t.jsx)("button",{onClick:()=>N(null),className:"text-infra-400 hover:text-infra-100 transition-colors",children:(0,t.jsx)(i.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`px-3 py-1 text-sm font-semibold rounded ${"success"===b.status?"bg-green-900/30 text-green-400 border border-green-800":"bg-red-900/30 text-red-400 border border-red-800"}`,children:b.status.toUpperCase()}),b.errorCode&&(0,t.jsxs)("span",{className:"text-sm text-infra-400",children:["Error: ",(0,t.jsx)("code",{className:"text-red-400",children:b.errorCode})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Timestamp"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"text-sm text-infra-100",children:[$(b.timestamp).date," at ",$(b.timestamp).time]}),(0,t.jsxs)("span",{className:"text-xs text-infra-500",children:["(",$(b.timestamp).relative,")"]}),(0,t.jsx)("button",{onClick:()=>T(b.timestamp,"timestamp"),className:"ml-2 text-infra-400 hover:text-infra-100 transition-colors",title:"Copy ISO timestamp",children:"timestamp"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Amount"}),(0,t.jsx)("p",{className:"text-sm text-infra-100 font-mono",children:C(b.amount,b.asset)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Asset"}),(0,t.jsx)("p",{className:"text-sm text-infra-100",children:b.asset})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Network"}),(0,t.jsx)("p",{className:"text-sm text-infra-100",children:(e=b.chainId).includes("8453")?"Base Mainnet":e.includes("84532")?"Base Sepolia":e.includes("1")?"Ethereum Mainnet":e})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Facilitator"}),(0,t.jsx)("p",{className:"text-sm text-infra-100",children:b.facilitator})]})]}),b.x402TxHash&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Transaction Hash"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:b.x402TxHash}),(0,t.jsx)("button",{onClick:()=>T(b.x402TxHash,"txHash"),className:"text-infra-400 hover:text-infra-100 transition-colors",title:"Copy transaction hash",children:"txHash"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})}),I(b.x402TxHash,b.chainId)&&(0,t.jsx)("a",{href:I(b.x402TxHash,b.chainId),target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 hover:text-cyan-300 transition-colors",title:"View on block explorer",children:(0,t.jsx)(l.ExternalLink,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Performance"}),(0,t.jsxs)("p",{className:"text-sm text-infra-100",children:["Latency: ",(0,t.jsx)("span",{className:"font-mono",children:k(b.latencyMs)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Endpoint ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded",children:b.endpointId}),(0,t.jsx)("button",{onClick:()=>T(b.endpointId,"endpointId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"endpointId"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Log ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:b.id}),(0,t.jsx)("button",{onClick:()=>T(b.id,"logId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"logId"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]})]}),(b.customerId||b.agentId)&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b.customerId&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Customer ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:b.customerId}),(0,t.jsx)("button",{onClick:()=>T(b.customerId,"customerId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"customerId"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]}),b.agentId&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Agent ID"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:b.agentId}),(0,t.jsx)("button",{onClick:()=>T(b.agentId,"agentId"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"agentId"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-medium text-infra-400 uppercase tracking-wider mb-1 block",children:"Resource URL"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("code",{className:"text-sm text-infra-200 font-mono bg-infra-800 px-2 py-1 rounded flex-1 truncate",children:b.resource}),(0,t.jsx)("button",{onClick:()=>T(b.resource,"resource"),className:"text-infra-400 hover:text-infra-100 transition-colors",children:"resource"===w?(0,t.jsx)(x.Check,{className:"w-4 h-4 text-green-400"}):(0,t.jsx)(c.Copy,{className:"w-4 h-4"})})]})]})]}),(0,t.jsx)("div",{className:"sticky bottom-0 bg-infra-900 border-t border-infra-800 px-6 py-4 flex justify-end",children:(0,t.jsx)("button",{onClick:()=>N(null),className:"px-4 py-2 bg-infra-800 text-infra-100 rounded hover:bg-infra-700 transition-colors",children:"Close"})})]})})]})]})}e.s(["default",()=>o])}]);